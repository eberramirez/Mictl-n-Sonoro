/*! For license information please see main.3e52c36b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:o.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},188:(e,t,n)=>{n.d(t,{generateCulturalStory:()=>q});const r=["user","model","function","system"];var i,s,a,o,l,u,c,d;!function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"}(i||(i={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(s||(s={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(a||(a={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(o||(o={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.OTHER="OTHER"}(l||(l={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(u||(u={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(c||(c={})),function(e){e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT"}(d||(d={}));class h extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class f extends h{constructor(e,t){super(e),this.response=t}}var p;!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(p||(p={}));class m{constructor(e,t,n,r,i){this.model=e,this.task=t,this.apiKey=n,this.stream=r,this.requestOptions=i}toString(){var e,t;const n=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta";let r=`${(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com"}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function g(e){const t=new Headers;return t.append("Content-Type","application/json"),t.append("x-goog-api-client",function(e){const t=[];return(null===e||void 0===e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.7.1"),t.join(" ")}(e.requestOptions)),t.append("x-goog-api-key",e.apiKey),t}async function y(e,t,n,r,i,s){return async function(e,t,n,r,i,s){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:fetch;const o=new m(e,t,n,r,s);let l;try{const o=await async function(e,t,n,r,i,s){const a=new m(e,t,n,r,s);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},v(s)),{method:"POST",headers:await g(a),body:i})}}(e,t,n,r,i,s);if(l=await a(o.url,o.fetchOptions),!l.ok){let e="";try{const t=await l.json();e=t.error.message,t.error.details&&(e+=` ${JSON.stringify(t.error.details)}`)}catch(u){}throw new Error(`[${l.status} ${l.statusText}] ${e}`)}}catch(u){const e=new h(`Error fetching from ${o.toString()}: ${u.message}`);throw e.stack=u.stack,e}return l}(e,t,n,r,i,s,fetch)}function v(e){const t={};if((null===e||void 0===e?void 0:e.timeout)>=0){const n=new AbortController,r=n.signal;setTimeout(()=>n.abort(),e.timeout),t.signal=r}return t}function b(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),S(e.candidates[0]))throw new f(`${x(e)}`,e);return function(e){var t,n,r,i;return(null===(i=null===(r=null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)||void 0===r?void 0:r[0])||void 0===i?void 0:i.text)?e.candidates[0].content.parts.map(e=>{let{text:t}=e;return t}).join(""):""}(e)}if(e.promptFeedback)throw new f(`Text not available. ${x(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),S(e.candidates[0]))throw new f(`${x(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),w(e)[0]}if(e.promptFeedback)throw new f(`Function call not available. ${x(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),S(e.candidates[0]))throw new f(`${x(e)}`,e);return w(e)}if(e.promptFeedback)throw new f(`Function call not available. ${x(e)}`,e)},e}function w(e){var t,n,r,i;const s=[];if(null===(n=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===n?void 0:n.parts)for(const a of null===(i=null===(r=e.candidates)||void 0===r?void 0:r[0].content)||void 0===i?void 0:i.parts)a.functionCall&&s.push(a.functionCall);return s.length>0?s:void 0}const E=[l.RECITATION,l.SAFETY];function S(e){return!!e.finishReason&&E.includes(e.finishReason)}function x(e){var t,n,r;let i="";if(e.candidates&&0!==e.candidates.length||!e.promptFeedback){if(null===(r=e.candidates)||void 0===r?void 0:r[0]){const t=e.candidates[0];S(t)&&(i+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(i+=`: ${t.finishMessage}`))}}else i+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(i+=` due to ${e.promptFeedback.blockReason}`),(null===(n=e.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(i+=`: ${e.promptFeedback.blockReasonMessage}`);return i}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function C(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(l,u):c(s[0][2],n)}catch(r){c(s[0][3],r)}var n}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}"function"===typeof SuppressedError&&SuppressedError;const T=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function k(e){const t=function(e){const t=e.getReader();return new ReadableStream({start(e){let n="";return r();function r(){return t.read().then(t=>{let{value:i,done:s}=t;if(s)return n.trim()?void e.error(new h("Failed to parse stream")):void e.close();n+=i;let a,o=n.match(T);for(;o;){try{a=JSON.parse(o[1])}catch(l){return void e.error(new h(`Error parsing JSON response: "${o[1]}"`))}e.enqueue(a),n=n.substring(o[0].length),o=n.match(T)}return r()})}}})}(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))),[n,r]=t.tee();return{stream:N(n),response:I(r)}}async function I(e){const t=[],n=e.getReader();for(;;){const{done:e,value:r}=await n.read();if(e)return b(A(t));t.push(r)}}function N(e){return C(this,arguments,function*(){const t=e.getReader();for(;;){const{value:e,done:n}=yield _(t.read());if(n)break;yield yield _(b(e))}})}function A(e){const t=e[e.length-1],n={promptFeedback:null===t||void 0===t?void 0:t.promptFeedback};for(const r of e)if(r.candidates)for(const e of r.candidates){const t=e.index;if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:e.index}),n.candidates[t].citationMetadata=e.citationMetadata,n.candidates[t].finishReason=e.finishReason,n.candidates[t].finishMessage=e.finishMessage,n.candidates[t].safetyRatings=e.safetyRatings,e.content&&e.content.parts){n.candidates[t].content||(n.candidates[t].content={role:e.content.role||"user",parts:[]});const r={};for(const i of e.content.parts)i.text&&(r.text=i.text),i.functionCall&&(r.functionCall=i.functionCall),0===Object.keys(r).length&&(r.text=""),n.candidates[t].content.parts.push(r)}}return n}async function D(e,t,n,r){return k(await y(t,p.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(n),r))}async function R(e,t,n,r){const i=await y(t,p.GENERATE_CONTENT,e,!1,JSON.stringify(n),r);return{response:b(await i.json())}}function O(e){let t=[];if("string"===typeof e)t=[{text:e}];else for(const n of e)"string"===typeof n?t.push({text:n}):t.push(n);return function(e){const t={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of e)"functionResponse"in s?(n.parts.push(s),i=!0):(t.parts.push(s),r=!0);if(r&&i)throw new h("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new h("No content is provided for sending chat message.");if(r)return t;return n}(t)}function L(e){if(e.contents)return e;return{contents:[O(e)]}}const P=["text","inlineData","functionCall","functionResponse"],M={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]},j={user:["model"],function:["model"],model:["user","function"],system:[]};const F="SILENT_ERROR";class U{constructor(e,t,n,i){this.model=t,this.params=n,this.requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null===n||void 0===n?void 0:n.history)&&(!function(e){let t;for(const n of e){const{role:e,parts:i}=n;if(!t&&"user"!==e)throw new h(`First content should be with role 'user', got ${e}`);if(!r.includes(e))throw new h(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(r)}`);if(!Array.isArray(i))throw new h("Content should have 'parts' property with an array of Parts");if(0===i.length)throw new h("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0};for(const t of i)for(const e of P)e in t&&(s[e]+=1);const a=M[e];for(const t of P)if(!a.includes(t)&&s[t]>0)throw new h(`Content with role '${e}' can't contain '${t}' part`);if(t&&!j[e].includes(t.role))throw new h(`Content with role '${e}' can't follow '${t.role}'. Valid previous roles: ${JSON.stringify(j)}`);t=n}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){var t,n,r,i,s;await this._sendPromise;const a=O(e),o={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,contents:[...this._history,a]};let l;return this._sendPromise=this._sendPromise.then(()=>R(this._apiKey,this.model,o,this.requestOptions)).then(e=>{var t;if(e.response.candidates&&e.response.candidates.length>0){this._history.push(a);const n=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(n)}else{const t=x(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}),await this._sendPromise,l}async sendMessageStream(e){var t,n,r,i,s;await this._sendPromise;const a=O(e),o={safetySettings:null===(t=this.params)||void 0===t?void 0:t.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(s=this.params)||void 0===s?void 0:s.systemInstruction,contents:[...this._history,a]},l=D(this._apiKey,this.model,o,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>l).catch(e=>{throw new Error(F)}).then(e=>e.response).then(e=>{if(e.candidates&&e.candidates.length>0){this._history.push(a);const t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{const t=x(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==F&&console.error(e)}),l}}class V{constructor(e,t,n){this.apiKey=e,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=t.systemInstruction,this.requestOptions=n||{}}async generateContent(e){const t=L(e);return R(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},t),this.requestOptions)}async generateContentStream(e){const t=L(e);return D(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},t),this.requestOptions)}startChat(e){return new U(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},e),this.requestOptions)}async countTokens(e){const t=L(e);return async function(e,t,n,r){return(await y(t,p.COUNT_TOKENS,e,!1,JSON.stringify(Object.assign(Object.assign({},n),{model:t})),r)).json()}(this.apiKey,this.model,t,this.requestOptions)}async embedContent(e){const t=function(e){if("string"===typeof e||Array.isArray(e))return{content:O(e)};return e}(e);return async function(e,t,n,r){return(await y(t,p.EMBED_CONTENT,e,!1,JSON.stringify(n),r)).json()}(this.apiKey,this.model,t,this.requestOptions)}async batchEmbedContents(e){return async function(e,t,n,r){const i=n.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await y(t,p.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:i}),r)).json()}(this.apiKey,this.model,e,this.requestOptions)}}var z=n(574);const B="AIzaSyB88-nL8SAbqGCcJ6SoMLwB-52SV66JvUE";const $=new class{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new h("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new V(this.apiKey,e,t)}}(B),q=async e=>{try{const t=$.getGenerativeModel({model:"gemini-1.5-flash",generationConfig:{temperature:.8,topK:40,topP:.95,maxOutputTokens:2048}}),n=(e=>{let{cultura:t,tipoHistoria:n,personajesPrincipales:r,lugar:i,tema:s,edad:a,duracion:o,incluirDecisiones:l}=e;const u=z.Pg[t],c=z._D[n],d=`\nCONTEXTO CULTURAL ESPEC\xcdFICO:\n- Civilizaci\xf3n: ${u.nombre}\n- Descripci\xf3n: ${u.descripcion}\n- Elementos culturales aut\xe9nticos: ${u.elementos.join(", ")}\n- Lugares caracter\xedsticos: ${u.lugares.join(", ")}\n- Personajes tradicionales: ${u.personajes.join(", ")}\n`,h=`\nINSTRUCCIONES CULTURALES CR\xcdTICAS:\n1. RESPETAR la autenticidad hist\xf3rica y cultural\n2. USAR elementos, nombres y conceptos genuinos de la cultura ${u.nombre}\n3. EVITAR anacronismos o elementos de otras culturas\n4. INCORPORAR valores y cosmovisi\xf3n de la civilizaci\xf3n elegida\n5. USAR un lenguaje respetuoso y educativo sobre la cultura ancestral\n`,f=l?"\nFORMATO INTERACTIVO:\n- Incluir exactamente 3 momentos de decisi\xf3n marcados como [DECISI\xd3N]\n- Cada decisi\xf3n debe tener 2-3 opciones claras\n- Las decisiones deben influir en el desarrollo de la historia\n- Formato: [DECISI\xd3N: \xbfQu\xe9 debe hacer el protagonista?]\n  Opci\xf3n A: [descripci\xf3n]\n  Opci\xf3n B: [descripci\xf3n]\n  Opci\xf3n C: [descripci\xf3n]\n":"";return`\nEres un narrador experto en culturas prehisp\xe1nicas mexicanas. Crea un ${c} de la cultura ${u.nombre} con estas especificaciones:\n\n${d}\n\nPAR\xc1METROS DE LA HISTORIA:\n- Personajes principales: ${r}\n- Lugar principal: ${i}\n- Tema central: ${s}\n- Edad del p\xfablico: ${a} a\xf1os\n- Duraci\xf3n aproximada: ${o} minutos de lectura\n- Tipo de historia: ${c}\n\n${h}\n\n${f}\n\nESTRUCTURA REQUERIDA:\n1. T\xedtulo inspirado en la cultura ${u.nombre}\n2. Inicio que establezca el contexto cultural\n3. Desarrollo con elementos aut\xe9nticos de la civilizaci\xf3n\n4. Cl\xedmax con resoluci\xf3n satisfactoria\n5. Final que refuerce valores culturales\n\nELEMENTOS A INCLUIR:\n- Nombres en idioma original (n\xe1huatl, maya, zapoteco, etc.) con explicaci\xf3n\n- Descripciones de vestimenta, arquitectura y costumbres aut\xe9nticas\n- Referencias a la cosmovisi\xf3n y religi\xf3n de la cultura\n- Ense\xf1anzas o valores propios de la civilizaci\xf3n\n\nLONGITUD: Aproximadamente ${"corta"===o?"300-400":"media"===o?"500-700":"800-1000"} palabras.\n\nCrea una historia memorable que honre la riqueza cultural de ${u.nombre} y eduque sobre su legado.\n`})(e),r=await t.generateContent(n),i=await r.response;return i.text()}catch(t){throw console.error("Error generando cuento cultural:",t),new Error("No se pudo generar el cuento. Verifica tu conexi\xf3n y API key.")}}},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!_.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+I(l,0):s,E(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),N(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",E(e))for(var u=0;u<e.length;u++){var c=s+I(o=e[u],u);l+=N(o,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,c=s+I(o,u++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",function(e){return t.call(n,e,i++)}),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},L={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=x.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!_.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[o]=n,r=o);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function E(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,O(S);else{var t=r(c);null!==t&&L(E,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!N());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(u)&&i(u),w(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&L(E,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,_=!1,C=null,T=-1,k=5,I=-1;function N(){return!(t.unstable_now()-I<k)}function A(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?x():(_=!1,C=null)}}else _=!1}if("function"===typeof b)x=function(){b(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,R=D.port2;D.port1.onmessage=A,x=function(){R.postMessage(null)}}else x=function(){y(A,0)};function O(e){C=e,_||(_=!0,x())}function L(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,L(E,s-a))):(e.sortIndex=o,n(u,e),m||p||(m=!0,O(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},574:(e,t,n)=>{n.d(t,{Pg:()=>r,_D:()=>i});const r={mexica:{nombre:"Mexica (Azteca)",descripcion:"Imperio poderoso del centro de M\xe9xico",personajes:["Quetzalc\xf3atl","Tezcatlipoca","Moctezuma","Cuauht\xe9moc"],lugares:["Tenochtitlan","Templo Mayor","Lago de Texcoco","Tlatelolco"],elementos:["calpulli","huey tlatoani","pochteca","macuahuitl"]},maya:{nombre:"Maya",descripcion:"Civilizaci\xf3n avanzada del sureste mexicano",personajes:["Itzamn\xe1","Kukulk\xe1n","Ixchel","Chaac"],lugares:["Chich\xe9n Itz\xe1","Palenque","Tikal","Uxmal"],elementos:["cenotes","observatorios","c\xf3dices","tzolk'in"]},zapoteca:{nombre:"Zapoteca",descripcion:"Cultura del valle de Oaxaca",personajes:["Pitao Cocijo","Pitao Cozobi","Cosijopi"],lugares:["Monte Alb\xe1n","Mitla","Zaachila","Yagul"],elementos:["guelaguetza","hierogl\xedficos","urnas funerarias"]},olmeca:{nombre:"Olmeca",descripcion:"Cultura madre de Mesoam\xe9rica",personajes:["Jaguar","Hombre-Jaguar","Ni\xf1o-Jaguar"],lugares:["La Venta","Tres Zapotes","San Lorenzo"],elementos:["cabezas colosales","altares","hachas ceremoniales"]},tolteca:{nombre:"Tolteca",descripcion:"Maestros artesanos del centro de M\xe9xico",personajes:["Ce \xc1catl Topiltzin","Quetzalc\xf3atl"],lugares:["Tollan-Xicocotitlan","Tula"],elementos:["atlantes","chac mool","serpiente emplumada"]}},i={mito:"Relatos sobre dioses y la creaci\xf3n del mundo",leyenda:"Historias heroicas de personajes legendarios",aventura:"Viajes \xe9picos y descubrimientos",didactica:"Ense\xf1anzas sobre valores y tradiciones",fantasia:"Mundos m\xe1gicos con elementos sobrenaturales"}},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case S:return"Portal";case C:return"Profiler";case _:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Ct){return e.body}}function W(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,xe=null,_e=null;function Ce(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=Si(t),Se(e.stateNode,e.type,t))}}function Te(e){xe?_e?_e.push(e):_e=[e]:xe=e}function ke(){if(xe){var e=xe,t=_e;if(_e=xe=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ie(e,t,n)}finally{Ae=!1,(null!==xe||null!==_e)&&(Ne(),ke())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Si(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Oe=!1}function Pe(e,t,n,r,i,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Me=!0,je=e}};function ze(e,t,n,r,i,s,a,o,l){Me=!1,je=null,Pe.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,We=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,St,xt,_t,Tt,kt=!1,It=[],Nt=null,At=null,Dt=null,Rt=new Map,Ot=new Map,Lt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function jt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=bi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void Tt(e.priority,function(){xt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){kt=!1,null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),null!==Dt&&Ut(Dt)&&(Dt=null),Rt.forEach(Vt),Ot.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function $t(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),null!==Dt&&Bt(Dt,e),Rt.forEach(t),Ot.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Lt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=1,Qt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Gt(e,t,n,r){var i=bt,s=qt.transition;qt.transition=null;try{bt=4,Qt(e,t,n,r)}finally{bt=i,qt.transition=s}}function Qt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Wt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=jt(Nt,e,t,n,r,i),!0;case"dragenter":return At=jt(At,e,t,n,r,i),!0;case"mouseover":return Dt=jt(Dt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,jt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,jt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&Et(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Wt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Wt=null;function Yt(e,t,n,r){if(Wt=null,null!==(e=bi(e=Ee(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function an(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),hn=j({},cn,{view:0,detail:0}),fn=an(hn),pn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=an(pn),gn=an(j({},pn,{dataTransfer:0})),yn=an(j({},hn,{relatedTarget:0})),vn=an(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=an(bn),En=an(j({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Tn(){return Cn}var kn=j({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(kn),Nn=an(j({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Dn=an(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=j({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Rn),Ln=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Mn=null;c&&"documentMode"in document&&(Mn=document.documentMode);var jn=c&&"TextEvent"in window&&!Mn,Fn=c&&(!Pn||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var $n=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Qn=null;function Wn(e){Ur(e,0)}function Yn(e){if(G(Ei(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Zn;if(c){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Gn&&(Gn.detachEvent("onpropertychange",rr),Qn=Gn=null)}function rr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Kn(t,Qn,e,Ee(e)),De(Wn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Qn=n,(Gn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,br=null,wr=!1;function Er(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&ur(br,r)||(br=r,0<(r=Gr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},_r={},Cr={};function Tr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return _r[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var kr=Tr("animationend"),Ir=Tr("animationiteration"),Nr=Tr("animationstart"),Ar=Tr("transitionend"),Dr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Dr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Rr.length;Lr++){var Pr=Rr[Lr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Nr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,u){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=je;Me=!1,je=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,u),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,u=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,o,u),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Vr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function $r(e){if(!e[Br]){e[Br]=!0,a.forEach(function(t){"selectionchange"!==t&&(jr.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=bi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}De(function(){var r=s,i=Ee(n),a=[];e:{var o=Dr.get(e);if(void 0!==o){var l=dn,u=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":u="focus",l=yn;break;case"focusout":u="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case Ir:case Nr:l=vn;break;case Ar:l=Dn;break;case"scroll":l=fn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==o?o+"Capture":null:o;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&c.push(Kr(p,m,f)))),d)break;p=p.return}0<c.length&&(o=new l(o,u,null,n,i),a.push({event:o,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(u=n.relatedTarget||n.fromElement)||!bi(u)&&!u[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?bi(u):null)&&(u!==(d=Be(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=mn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Nn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:Ei(l),f=null==u?o:Ei(u),(o=new c(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,bi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Qr(f))p++;for(f=0,m=h;m;m=Qr(m))f++;for(;0<p-f;)c=Qr(c),p--;for(;0<f-p;)h=Qr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Qr(c),h=Qr(h)}c=null}else c=null;null!==l&&Wr(a,o,l,c,!1),null!==u&&null!==d&&Wr(a,d,u,c,!0)}if("select"===(l=(o=r?Ei(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xn;else if(Hn(o))if(Jn)g=or;else{g=sr;var y=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ar);switch(g&&(g=g(e,r))?Kn(a,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?Ei(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,br=null);break;case"focusout":br=vr=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,Er(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":Er(a,n,i)}var v;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else $n?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&($n||"onCompositionStart"!==b?"onCompositionEnd"===b&&$n&&(v=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,$n=!0)),0<(y=Gr(r,b)).length&&(b=new En(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if($n)return"compositionend"===e||!Pn&&zn(e,t)?(e=tn(),en=Zt=Jt=null,$n=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new En("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Ur(a,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Re(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(l=Re(n,s))&&a.unshift(Kr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(Kr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,si="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout(function(){throw e})}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void $t(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);$t(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,pi="__reactProps$"+hi,mi="__reactContainer$"+hi,gi="__reactEvents$"+hi,yi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[fi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[fi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ei(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Si(e){return e[pi]||null}var xi=[],_i=-1;function Ci(e){return{current:e}}function Ti(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function ki(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ni=Ci(Ii),Ai=Ci(!1),Di=Ii;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Ti(Ai),Ti(Ni)}function Pi(e,t,n){if(Ni.current!==Ii)throw Error(s(168));ki(Ni,t),ki(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,$(e)||"Unknown",i));return j({},n,r)}function ji(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ni.current,ki(Ni,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Mi(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ai),Ti(Ni),ki(Ni,e)):Ti(Ai),ki(Ai,n)}var Ui=null,Vi=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function $i(){if(!zi&&null!==Ui){zi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,$i),i}finally{bt=t,zi=!1}}return null}var qi=[],Hi=0,Ki=null,Gi=0,Qi=[],Wi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[Hi++]=Gi,qi[Hi++]=Ki,Ki=e,Gi=t}function es(e,t,n){Qi[Wi++]=Xi,Qi[Wi++]=Ji,Qi[Wi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Ki;)Ki=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Qi[--Wi],Qi[Wi]=null,Ji=Qi[--Wi],Qi[Wi]=null,Xi=Qi[--Wi],Qi[Wi]=null}var rs=null,is=null,ss=!1,as=null;function os(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function us(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(us(e))throw Error(s(418));t=ci(n.nextSibling);var r=rs;t&&ls(e,t)?os(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(us(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=is)){if(us(e))throw fs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ci(e.nextSibling)}function ps(){is=rs=null,ss=!1}function ms(e){null===as?as=[e]:as.push(e)}var gs=w.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===x?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&bs(s)===t.type)?((r=i(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Pu(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Pu(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case S:return(t=Uu(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Mu(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var u=null,c=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,o[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),s=a(y,s,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===o.length)return n(i,d),ss&&Zi(i,m),u;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===c?u=d:c.sibling=d,c=d);return ss&&Zi(i,m),u}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),ss&&Zi(i,m),u}function g(i,o,l,u){var c=P(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=a(b,o,g),null===d?c=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),ss&&Zi(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(o=a(v,o,g),null===d?c=v:d.sibling=v,d=v);return ss&&Zi(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=a(v,o,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),ss&&Zi(i,g),c}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===x&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case E:e:{for(var u=a.key,c=s;null!==c;){if(c.key===u){if((u=a.type)===x){if(7===c.tag){n(r,c.sibling),(s=i(c,a.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&bs(u)===c.type){n(r,c.sibling),(s=i(c,a.props)).ref=ys(r,c,a),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===x?((s=Mu(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Pu(a.type,a.key,a.props,null,r.mode,l)).ref=ys(r,s,a),l.return=r,r=l)}return o(r);case S:e:{for(c=a.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uu(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(c=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(P(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Fu(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var Es=ws(!0),Ss=ws(!1),xs=Ci(null),_s=null,Cs=null,Ts=null;function ks(){Ts=Cs=_s=null}function Is(e){var t=xs.current;Ti(xs),e._currentValue=t}function Ns(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){_s=e,Ts=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===_s)throw Error(s(308));Cs=e,_s.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Rs=null;function Os(e){null===Rs?Rs=[e]:Rs.push(e)}function Ls(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ps(e,r)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function js(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ps(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ps(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var i=e.updateQueue;Ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,u=l.next;l.next=null,null===a?s=u:a.next=u,a=l;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,c=u=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Ms=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);jl|=a,e.lanes=a,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ks=Ci(Hs),Gs=Ci(Hs),Qs=Ci(Hs);function Ws(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(ki(Qs,t),ki(Gs,e),ki(Ks,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ks),ki(Ks,t)}function Xs(){Ti(Ks),Ti(Gs),Ti(Qs)}function Js(e){Ws(Qs.current);var t=Ws(Ks.current),n=le(t,e.type);t!==n&&(ki(Gs,e),ki(Ks,n))}function Zs(e){Gs.current===e&&(Ti(Ks),Ti(Gs))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=w.ReactCurrentDispatcher,sa=w.ReactCurrentBatchConfig,aa=0,oa=null,la=null,ua=null,ca=!1,da=!1,ha=0,fa=0;function pa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,oa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:eo,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(s(301));a+=1,ua=la=null,t.updateQueue=null,ia.current=to,e=n(r,i)}while(da)}if(ia.current=Ja,t=null!==la&&null!==la.next,aa=0,ua=la=oa=null,ca=!1,t)throw Error(s(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?oa.memoizedState=ua=e:ua=ua.next=e,ua}function ba(){if(null===la){var e=oa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ua?oa.memoizedState:ua.next;if(null!==t)ua=t,la=e;else{if(null===e)throw Error(s(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ua?oa.memoizedState=ua=e:ua=ua.next=e}return ua}function wa(e,t){return"function"===typeof t?t(e):t}function Ea(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,u=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,o=r):u=u.next=h,oa.lanes|=d,jl|=d}c=c.next}while(null!==c&&c!==a);null===u?o=r:u.next=l,lr(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,oa.lanes|=a,jl|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=ba(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);lr(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function xa(){}function _a(e,t){var n=oa,r=ba(),i=t(),a=!lr(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,Ma(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Da(9,Ta.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&aa)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ta(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Na(e)}function ka(e,t,n){return n(function(){Ia(t)&&Na(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Na(e){var t=Ps(e,1);null!==t&&ru(t,e,1,-1)}function Aa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,oa,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oa.updateQueue)?(t={lastEffect:null,stores:null},oa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ba().memoizedState}function Oa(e,t,n,r){var i=va();oa.flags|=e,i.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var i=ba();r=void 0===r?null:r;var s=void 0;if(null!==la){var a=la.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Da(t,n,s,r))}oa.flags|=e,i.memoizedState=Da(1|t,n,s,r)}function Pa(e,t){return Oa(8390656,8,e,t)}function Ma(e,t){return La(2048,8,e,t)}function ja(e,t){return La(4,2,e,t)}function Fa(e,t){return La(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Ua.bind(null,t,e),n)}function za(){}function Ba(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(lr(n,t)||(n=mt(),oa.lanes|=n,jl|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{bt=n,sa.transition=r}}function Ka(){return ba().memoizedState}function Ga(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wa(e))Ya(t,n);else if(null!==(n=Ls(e,t,n,r))){ru(n,e,r,tu()),Xa(n,t,r)}}function Qa(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,lr(o,a)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ls(e,t,i,r))&&(ru(n,e,r,i=tu()),Xa(n,t,r))}}function Wa(e){var t=e.alternate;return e===oa||null!==t&&t===oa}function Ya(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Ja={readContext:Ds,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Ds,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,oa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Aa,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oa,i=va();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&aa)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Pa(ka.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,Ta.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Al.identifierPrefix;if(ss){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eo={readContext:Ds,useCallback:Ba,useContext:Ds,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:$a,useReducer:Ea,useRef:Ra,useState:function(){return Ea(wa)},useDebugValue:za,useDeferredValue:function(e){return qa(ba(),la.memoizedState,e)},useTransition:function(){return[Ea(wa)[0],ba().memoizedState]},useMutableSource:xa,useSyncExternalStore:_a,useId:Ka,unstable_isNewReconciler:!1},to={readContext:Ds,useCallback:Ba,useContext:Ds,useEffect:Ma,useImperativeHandle:Va,useInsertionEffect:ja,useLayoutEffect:Fa,useMemo:$a,useReducer:Sa,useRef:Ra,useState:function(){return Sa(wa)},useDebugValue:za,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:qa(t,la.memoizedState,e)},useTransition:function(){return[Sa(wa)[0],ba().memoizedState]},useMutableSource:xa,useSyncExternalStore:_a,useId:Ka,unstable_isNewReconciler:!1};function no(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(ru(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(ru(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(ru(t,e,r,n),zs(t,e,r))}};function so(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,s))}function ao(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Oi(t)?Di:Ni.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function oo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},js(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Oi(t)?Di:Ni.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ro(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&io.enqueueReplaceState(i,i.state,null),$s(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),ho(0,t)},n}function mo(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=w.ReactCurrentOwner,wo=!1;function Eo(e,t,n,r){t.child=null===e?Ss(t,null,n,r):Es(t,e.child,n,r)}function So(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=ga(e,t,n,r,s,i),n=ya(),null===e||wo?(ss&&n&&ts(t),t.flags|=1,Eo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function xo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ou(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_o(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Lu(s,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(ur(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return ko(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ll,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ll,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ll,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ll,Ol),Ol|=r;return Eo(e,t,i,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,i){var s=Oi(n)?Di:Ni.current;return s=Ri(t,s),As(t,i),n=ga(e,t,n,r,s,i),r=ya(),null===e||wo?(ss&&r&&ts(t),t.flags|=1,Eo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Io(e,t,n,r,i){if(Oi(n)){var s=!0;ji(t)}else s=!1;if(As(t,i),null===t.stateNode)qo(e,t),ao(t,n,r),lo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Ds(u):u=Ri(t,u=Oi(n)?Di:Ni.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==u)&&oo(t,a,r,u),Ms=!1;var h=t.memoizedState;a.state=h,$s(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ai.current||Ms?("function"===typeof c&&(ro(t,n,c,r),l=t.memoizedState),(o=Ms||so(t,n,o,r,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fs(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:no(t.type,o),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Ri(t,l=Oi(n)?Di:Ni.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&oo(t,a,r,l),Ms=!1,h=t.memoizedState,a.state=h,$s(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ai.current||Ms?("function"===typeof f&&(ro(t,n,f,r),p=t.memoizedState),(u=Ms||so(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return No(e,t,n,r,s,i)}function No(e,t,n,r,i,s){To(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Ho(e,t,s);r=t.stateNode,bo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Es(t,e.child,null,s),t.child=Es(t,null,o,s)):Eo(e,t,o,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Ys(e,t.containerInfo)}function Do(e,t,n,r,i){return ps(),ms(i),t.flags|=256,Eo(e,t,n,r),t.child}var Ro,Oo,Lo,Po,Mo={dehydrated:null,treeContext:null,retryLane:0};function jo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fo(e,t,n){var r,i=t.pendingProps,a=ea.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),ki(ea,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=ju(l,i,0,null),e=Mu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=jo(n),t.memoizedState=Mo,e):Uo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(a=Mu(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Es(t,e.child,null,o),t.child.memoizedState=jo(o),t.memoizedState=Mo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Al)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ps(e,i),ru(r,e,i,-1))}return gu(),Vo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Iu.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,is=ci(i.nextSibling),rs=t,ss=!0,as=null,null!==e&&(Qi[Wi++]=Xi,Qi[Wi++]=Ji,Qi[Wi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Uo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Lu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Lu(r,o):(o=Mu(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?jo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,i}return e=(o=e.child).sibling,i=Lu(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uo(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ms(r),Es(t,e.child,null,n),(e=Uo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ns(e.return,t,n)}function Bo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $o(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Eo(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bo(t,!0,n,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qo(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Oi(t.type)&&Li(),Go(t),null;case 3:return r=t.stateNode,Xs(),Ti(Ai),Ti(Ni),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==as&&(ou(as),as=null))),Oo(e,t),Go(t),null;case 5:Zs(t);var i=Ws(Qs.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Ws(Ks.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[pi]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Vr(Mr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=W(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ve(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Vr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ws(Qs.current),Ws(Ks.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(a=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Go(t),null;case 13:if(Ti(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ps(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[fi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==as&&(ou(as),as=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Pl&&(Pl=3):gu())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Xs(),Oo(e,t),null===e&&$r(t.stateNode.containerInfo),Go(t),null;case 10:return Is(t.type._context),Go(t),null;case 19:if(Ti(ea),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ko(a,!1);else{if(0!==Pl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ko(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>$l&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!ss)return Go(t),null}else 2*Xe()-a.renderingStartTime>$l&&1073741824!==n&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=ea.current,ki(ea,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Wo(e,t){switch(ns(t),t.tag){case 1:return Oi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ti(Ai),Ti(Ni),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ti(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ea),null;case 4:return Xs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oo=function(){},Lo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ws(Ks.current);var s,a=null;switch(n){case"input":i=W(e,i),r=W(e,r),a=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Vr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Xo=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[gi],delete t[yi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Xo||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),$t(e)):ui(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xo&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cu(n,t,o)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xo=(r=Xo)||null!==n.memoizedState,fl(e,t,n),Xo=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach(function(t){var r=Nu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(a,o,i),dl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Cu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Cu(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),be(l,o);var c=be(l,a);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,c)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){Cu(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cu(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{$t(t.containerInfo)}catch(g){Cu(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(c=Xo)||d,gl(t,e),Xo=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cu(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(h);continue}}null!==p?(p.return=f,Zo=p):Sl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",o))}catch(g){Cu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Cu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,ll(e),a);break;default:throw Error(s(161))}}catch(o){Cu(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Zo=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Yo;var u=Xo;if(Yo=a,(Xo=l)&&!u)for(Zo=i;null!==Zo;)l=(a=Zo).child,22===a.tag&&null!==a.memoizedState?xl(i):null!==l?(l.return=a,Zo=l):xl(i);for(;null!==s;)Zo=s,wl(s,t,n),s=s.sibling;Zo=i,Yo=o,Xo=u}El(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Zo=s):El(e)}}function El(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:no(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&$t(h)}}}break;default:throw Error(s(163))}Xo||512&t.flags&&sl(t)}catch(f){Cu(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function Sl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function xl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Cu(t,s,l)}break;case 5:var a=t.return;try{sl(t)}catch(l){Cu(t,a,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var _l,Cl=Math.ceil,Tl=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Nl=0,Al=null,Dl=null,Rl=0,Ol=0,Ll=Ci(0),Pl=0,Ml=null,jl=0,Fl=0,Ul=0,Vl=null,zl=null,Bl=0,$l=1/0,ql=null,Hl=!1,Kl=null,Gl=null,Ql=!1,Wl=null,Yl=0,Xl=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Nl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Rl?Rl&-Rl:null!==gs.transition?(0===eu&&(eu=mt()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ru(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(Fl|=n),4===Pl&&lu(e,Rl)),iu(e,r),1===n&&0===Nl&&0===(1&t.mode)&&($l=Xe()+500,Vi&&$i()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Al?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),oi(function(){0===(6&Nl)&&$i()}),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Au(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(xu()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Nl;Nl|=2;var a=mu();for(Al===e&&Rl===t||(ql=null,$l=Xe()+500,fu(e,t));;)try{bu();break}catch(l){pu(e,l)}ks(),Tl.current=a,Nl=i,null!==Dl?t=0:(Al=null,Rl=0,t=Pl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Ml,fu(e,0),lu(e,r),iu(e,Xe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(a=pt(e))&&(r=a,t=au(e,a))),1===t))throw n=Ml,fu(e,0),lu(e,r),iu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Su(e,zl,ql);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(Su.bind(null,e,zl,ql),t);break}Su(e,zl,ql);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ii(Su.bind(null,e,zl,ql),r);break}Su(e,zl,ql);break;default:throw Error(s(329))}}}return iu(e,Xe()),e.callbackNode===n?su.bind(null,e):null}function au(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=zl,zl=n,null!==t&&ou(t)),e}function ou(e){null===zl?zl=e:zl.push.apply(zl,e)}function lu(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Nl))throw Error(s(327));xu();var t=ht(e,0);if(0===(1&t))return iu(e,Xe()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ml,fu(e,0),lu(e,t),iu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,zl,ql),iu(e,Xe()),null}function cu(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&($l=Xe()+500,Vi&&$i())}}function du(e){null!==Wl&&0===Wl.tag&&0===(6&Nl)&&xu();var t=Nl;Nl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Nl=t))&&$i()}}function hu(){Ol=Ll.current,Ti(Ll)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:Xs(),Ti(Ai),Ti(Ni),ra();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Ti(ea);break;case 10:Is(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Al=e,Dl=e=Lu(e.current,null),Rl=Ol=t,Pl=0,Ml=null,Ul=Fl=jl=0,zl=Vl=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Rs=null}return e}function pu(e,t){for(;;){var n=Dl;try{if(ks(),ia.current=Ja,ca){for(var r=oa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,ua=la=oa=null,da=!1,ha=0,kl.current=null,null===n||null===n.return){Pl=1,Ml=t,Dl=null;break}e:{var a=e,o=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=yo(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&go(a,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){go(a,c,t),gu();break e}u=Error(s(426))}else if(ss&&1&l.mode){var y=yo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vo(y,o,l,0,t),ms(uo(u,l));break e}}a=u=uo(u,l),4!==Pl&&(Pl=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,po(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Bs(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}Eu(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function mu(){var e=Tl.current;return Tl.current=Ja,null===e?Ja:e}function gu(){0!==Pl&&3!==Pl&&2!==Pl||(Pl=4),null===Al||0===(268435455&jl)&&0===(268435455&Fl)||lu(Al,Rl)}function yu(e,t){var n=Nl;Nl|=2;var r=mu();for(Al===e&&Rl===t||(ql=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(ks(),Nl=n,Tl.current=r,null!==Dl)throw Error(s(261));return Al=null,Rl=0,Pl}function vu(){for(;null!==Dl;)wu(Dl)}function bu(){for(;null!==Dl&&!We();)wu(Dl)}function wu(e){var t=_l(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?Eu(e):Dl=t,kl.current=null}function Eu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qo(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Wo(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Pl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Pl&&(Pl=5)}function Su(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{xu()}while(null!==Wl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Al&&(Dl=Al=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Au(tt,function(){return xu(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=bt;bt=1;var l=Nl;Nl|=4,kl.current=null,function(e,t){if(ti=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(E){n=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(u=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=o),f===a&&++d===r&&(u=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Ht=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:no(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(E){Cu(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}m=nl,nl=!1}(e,n),yl(n,e),mr(ni),Ht=!!ti,ni=ti=null,e.current=n,bl(n,e,i),Ye(),Nl=l,bt=o,Il.transition=a}else e.current=n;if(Ql&&(Ql=!1,Wl=e,Yl=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&xu(),a=e.pendingLanes,0!==(1&a)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,$i()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function xu(){if(null!==Wl){var e=wt(Yl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Wl)var r=!1;else{if(e=Wl,Wl=null,Yl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Zo=e.current;null!==Zo;){var a=Zo,o=a.child;if(0!==(16&Zo.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zo=c;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(al(d),d===c){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(a=Zo).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zo=v;break e}Zo=a.return}}var b=e.current;for(Zo=b;null!==Zo;){var w=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Zo=w;else e:for(o=b;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){Cu(l,l.return,S)}if(l===o){Zo=null;break e}var E=l.sibling;if(null!==E){E.return=l.return,Zo=E;break e}Zo=l.return}}if(Nl=i,$i(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function _u(e,t,n){e=Vs(e,t=po(0,t=uo(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function Cu(e,t,n){if(3===e.tag)_u(e,e,n);else for(;null!==t;){if(3===t.tag){_u(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Vs(t,e=mo(t,e=uo(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Rl&n)===n&&(4===Pl||3===Pl&&(130023424&Rl)===Rl&&500>Xe()-Bl?fu(e,0):Ul|=n),iu(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ps(e,t))&&(yt(e,t,n),iu(e,n))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),ku(e,n)}function Au(e,t){return Ge(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Du(e,t,n,r)}function Ou(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lu(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pu(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Ou(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case x:return Mu(n.children,i,a,t);case _:o=8,i|=8;break;case C:return(e=Ru(12,n,t,2|i)).elementType=C,e.lanes=a,e;case N:return(e=Ru(13,n,t,i)).elementType=N,e.lanes=a,e;case A:return(e=Ru(19,n,t,i)).elementType=A,e.lanes=a,e;case O:return ju(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case k:o=9;break e;case I:o=11;break e;case D:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ru(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mu(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,s,a,o,l){return e=new Vu(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ru(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},js(s),e}function Bu(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Mi(e,n,t)}return t}function $u(e,t,n,r,i,s,a,o,l){return(e=zu(n,r,!0,e,0,s,0,o,l)).context=Bu(null),n=e.current,(s=Us(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function qu(e,t,n,r){var i=t.current,s=tu(),a=nu(i);return n=Bu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(ru(e,i,a,s),zs(e,i,a)),a}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),ps();break;case 5:Js(t);break;case 1:Oi(t.type)&&ji(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fo(e,t,n):(ki(ea,1&ea.current),null!==(e=Ho(e,t,n))?e.sibling:null);ki(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return $o(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,ss&&0!==(1048576&t.flags)&&es(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ri(t,Ni.current);As(t,n),i=ga(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(a=!0,ji(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,js(t),i.updater=io,t.stateNode=i,i._reactInternals=t,lo(t,r,e,n),t=No(null,t,r,!0,a,n)):(t.tag=0,ss&&a&&ts(t),Eo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ou(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===D)return 14}return 2}(r),e=no(r,e),i){case 0:t=ko(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=So(null,t,r,e,n);break e;case 14:t=xo(null,t,r,no(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ko(e,t,r,i=t.elementType===r?i:no(r,i),n);case 1:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:no(r,i),n);case 3:e:{if(Ao(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Fs(e,t),$s(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Do(e,t,r,n,i=uo(Error(s(423)),t));break e}if(r!==i){t=Do(e,t,r,n,i=uo(Error(s(424)),t));break e}for(is=ci(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,as=null,n=Ss(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ho(e,t,n);break e}Eo(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ri(r,i)?o=null:null!==a&&ri(r,a)&&(t.flags|=32),To(e,t),Eo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Es(t,null,r,n):Eo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:no(r,i),n);case 7:return Eo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,ki(xs,r._currentValue),r._currentValue=o,null!==a)if(lr(a.value,o)){if(a.children===i.children&&!Ai.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Us(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),Ns(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ns(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Eo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ds(i)),t.flags|=1,Eo(e,t,r,n),t.child;case 14:return i=no(r=t.type,t.pendingProps),xo(e,t,r,i=no(r.type,i),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:no(r,i),qo(e,t),t.tag=1,Oi(r)?(e=!0,ji(t)):e=!1,As(t,n),ao(t,r,i),lo(t,r,i,n),No(null,t,r,!0,e,n);case 19:return $o(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Wu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hu(a);o.call(e)}}qu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hu(a);s.call(e)}}var a=$u(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=a,e[mi]=a.current,$r(8===e.nodeType?e.parentNode:e),du(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hu(l);o.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[mi]=l.current,$r(8===e.nodeType?e.parentNode:e),du(function(){qu(t,l,n,r)}),l}(n,t,e,i,r);return Hu(a)}Yu.prototype.render=Wu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qu(e,t,null,null)},Yu.prototype.unmount=Wu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du(function(){qu(null,e,null,null)}),t[mi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ft(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,Xe()),0===(6&Nl)&&($l=Xe()+500,$i()))}break;case 13:du(function(){var t=Ps(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}}),Gu(e,1)}},St=function(e){if(13===e.tag){var t=Ps(e,134217728);if(null!==t)ru(t,e,134217728,tu());Gu(e,134217728)}},xt=function(e){if(13===e.tag){var t=nu(e),n=Ps(e,t);if(null!==n)ru(n,e,t,tu());Gu(e,t)}},_t=function(){return bt},Tt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Si(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cu,Ne=du;var tc={usingClientEntryPoint:!1,Events:[wi,Ei,Si,Te,ke,cu]},nc={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(s(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,$r(8===e.nodeType?e.parentNode:e),new Wu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=$u(t,null,e,1,null!=n?n:null,i,0,a,o),e[mi]=t.current,$r(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(du(function(){ec(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(43),i=n(391),s=n(574),a=n(579);const o=e=>{let{formData:t,onChange:n,disabled:r}=e;return(0,a.jsxs)("div",{className:"cultural-selector",children:[(0,a.jsx)("h3",{children:"Selecci\xf3n Cultural"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"cultura",children:"Civilizaci\xf3n Prehisp\xe1nica"}),(0,a.jsxs)("select",{id:"cultura",name:"cultura",value:t.cultura,onChange:n,disabled:r,className:"cultural-select",children:[(0,a.jsx)("option",{value:"",children:"Selecciona una civilizaci\xf3n..."}),Object.entries(s.Pg).map(e=>{let[t,n]=e;return(0,a.jsx)("option",{value:t,children:n.nombre},t)})]}),t.cultura&&(0,a.jsx)("p",{className:"cultura-description",children:s.Pg[t.cultura].descripcion})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"tipoHistoria",children:"Tipo de Historia"}),(0,a.jsx)("select",{id:"tipoHistoria",name:"tipoHistoria",value:t.tipoHistoria,onChange:n,disabled:r,children:Object.entries(s._D).map(e=>{let[t,n]=e;return(0,a.jsxs)("option",{value:t,children:[t.charAt(0).toUpperCase()+t.slice(1)," - ",n]},t)})})]}),(0,a.jsxs)("div",{className:"form-row",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"edad",children:"Edad del P\xfablico"}),(0,a.jsxs)("select",{id:"edad",name:"edad",value:t.edad,onChange:n,disabled:r,children:[(0,a.jsx)("option",{value:"6-8",children:"6-8 a\xf1os (Infantil)"}),(0,a.jsx)("option",{value:"9-12",children:"9-12 a\xf1os (Pre-adolescente)"}),(0,a.jsx)("option",{value:"13-17",children:"13-17 a\xf1os (Adolescente)"}),(0,a.jsx)("option",{value:"18+",children:"18+ a\xf1os (Adulto)"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"duracion",children:"Duraci\xf3n"}),(0,a.jsxs)("select",{id:"duracion",name:"duracion",value:t.duracion,onChange:n,disabled:r,children:[(0,a.jsx)("option",{value:"corta",children:"Corta (3-5 min)"}),(0,a.jsx)("option",{value:"media",children:"Media (5-8 min)"}),(0,a.jsx)("option",{value:"larga",children:"Larga (8-12 min)"})]})]})]}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("label",{className:"checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",name:"incluirDecisiones",checked:t.incluirDecisiones,onChange:n,disabled:r}),(0,a.jsx)("span",{children:"Incluir decisiones interactivas"})]})})]})},l=e=>{let{onSubmit:t,isLoading:n,onViewSavedStories:i}=e;const[l,u]=(0,r.useState)({cultura:"mexica",tipoHistoria:"mito",personajesPrincipales:"",lugar:"",tema:"",edad:"9-12",duracion:"media",incluirDecisiones:!1}),c=e=>{const{name:t,value:n,type:r,checked:i}=e.target;u(e=>({...e,[t]:"checkbox"===r?i:n}))},d=e=>{u([{cultura:"mexica",tipoHistoria:"mito",personajesPrincipales:"Quetzalc\xf3atl y una joven sacerdotisa llamada Itzel",lugar:"El gran Teocalli de Tenochtitlan durante el solsticio de verano",tema:"El origen del cacao y su importancia sagrada para el pueblo mexica",edad:"9-12",duracion:"media",incluirDecisiones:!0},{cultura:"maya",tipoHistoria:"aventura",personajesPrincipales:"Itzamn\xe1, dios creador, y un joven escriba maya llamado Akbal",lugar:"Las selvas del Pet\xe9n y la ciudad sagrada de Tikal",tema:"La b\xfasqueda del conocimiento perdido en los c\xf3dices ancestrales",edad:"13-17",duracion:"larga",incluirDecisiones:!0},{cultura:"zapoteca",tipoHistoria:"leyenda",personajesPrincipales:"Pitao Cocijo, se\xf1or de la lluvia, y la princesa Donaj\xed",lugar:"Monte Alb\xe1n y los valles centrales de Oaxaca",tema:"El sacrificio heroico para salvar a su pueblo de la sequ\xeda",edad:"18+",duracion:"media",incluirDecisiones:!1}][e-1])};return(0,a.jsxs)("div",{className:"story-form cultural-theme",children:[(0,a.jsxs)("div",{className:"form-header",children:[(0,a.jsx)("h2",{children:"Crear Cuento Cultural"}),(0,a.jsx)("p",{children:"Genera historias basadas en las ricas tradiciones de M\xe9xico ancestral"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.cultura&&l.personajesPrincipales.trim()&&l.lugar.trim()&&l.tema.trim()?t(l):alert("Por favor, completa todos los campos obligatorios.")},children:[(0,a.jsx)(o,{formData:l,onChange:c,disabled:n}),(0,a.jsxs)("div",{className:"story-details",children:[(0,a.jsx)("h3",{children:"Detalles de la Historia"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"personajesPrincipales",children:"Personajes Principales *"}),(0,a.jsx)("input",{type:"text",id:"personajesPrincipales",name:"personajesPrincipales",value:l.personajesPrincipales,onChange:c,placeholder:"Ej: Quetzalc\xf3atl y una joven sacerdotisa llamada Citlali",disabled:n}),l.cultura&&(0,a.jsx)("div",{className:"suggestions",children:(0,a.jsxs)("small",{children:["Personajes sugeridos: ",s.Pg[l.cultura].personajes.join(", ")]})})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"lugar",children:"Lugar Principal *"}),(0,a.jsx)("input",{type:"text",id:"lugar",name:"lugar",value:l.lugar,onChange:c,placeholder:"Ej: El gran templo de Tenochtitlan durante la ceremonia del fuego nuevo",disabled:n}),l.cultura&&(0,a.jsx)("div",{className:"suggestions",children:(0,a.jsxs)("small",{children:["Lugares sugeridos: ",s.Pg[l.cultura].lugares.join(", ")]})})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"tema",children:"Tema Central *"}),(0,a.jsx)("textarea",{id:"tema",name:"tema",value:l.tema,onChange:c,placeholder:"Ej: La b\xfasqueda del equilibrio entre el mundo terrenal y el espiritual, donde los protagonistas deben aprender el valor de la sabidur\xeda ancestral...",disabled:n})]})]}),(0,a.jsx)("div",{className:"form-actions",children:(0,a.jsx)("button",{type:"submit",className:"generate-btn cultural-btn",disabled:n,children:n?"Creando cuento...":"Generar Cuento Cultural"})})]}),(0,a.jsxs)("div",{className:"examples cultural-examples",children:[(0,a.jsx)("h3",{children:"Ejemplos Culturales:"}),(0,a.jsxs)("div",{className:"example-buttons",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d(1),className:"example-btn mexica-btn",disabled:n,children:"Mito Mexica"}),(0,a.jsx)("button",{type:"button",onClick:()=>d(2),className:"example-btn maya-btn",disabled:n,children:"Aventura Maya"}),(0,a.jsx)("button",{type:"button",onClick:()=>d(3),className:"example-btn zapoteca-btn",disabled:n,children:"Leyenda Zapoteca"})]})]}),(0,a.jsx)("div",{className:"saved-stories-section",children:(0,a.jsx)("button",{type:"button",onClick:i,className:"view-saved-btn cultural-btn",disabled:n,children:"\ud83d\udcda Ver Cuentos Guardados"})})]})};var u=n(188);const c=e=>{let{story:t,originalFormData:n}=e;const[i,s]=(0,r.useState)([t]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)([]),h=e=>{const t=e.split("\n"),n=[];let r=!1;for(const i of t){if(i.includes("\xbfQu\xe9 decide")||i.includes("\xbfQu\xe9 hace")||i.includes("\xbfCu\xe1l es")){r=!0;break}r||i.includes("Historia interactiva completada")||n.push(i)}return n.join("\n").trim()},{cleanText:f,decisions:p}=(()=>{const e=i[i.length-1],t=h(e),n=(e=>{const t=e.split("\n"),n=[];let r=!1;for(let i=0;i<t.length;i++){const e=t[i].trim();e.includes("\xbfQu\xe9 decide")||e.includes("\xbfQu\xe9 hace")||e.includes("\xbfCu\xe1l es")?r=!0:r&&e.match(/^[A-Z]\)/)&&n.push({option:e.charAt(0),text:e.substring(3).trim()})}return n})(e);return n.length>0&&n.length!==c.length&&d(n),{cleanText:t,decisions:n}})();return(0,a.jsxs)("div",{className:"interactive-story-container",children:[(0,a.jsxs)("div",{className:"story-content",children:[i.map((e,t)=>(0,a.jsxs)("div",{className:"story-chapter",children:[t>0&&(0,a.jsx)("div",{className:"chapter-divider",children:"\u2014 \u26a1 \u2014"}),(0,a.jsx)("div",{className:"story-text",children:(i.length,h(e))})]},t)),o&&(0,a.jsxs)("div",{className:"decision-loading",children:[(0,a.jsx)("div",{className:"loading-spinner"}),(0,a.jsx)("p",{children:"Los c\xf3dices revelan el siguiente cap\xedtulo..."})]}),p.length>0&&!o&&(0,a.jsxs)("div",{className:"decisions-section",children:[(0,a.jsxs)("div",{className:"decision-prompt",children:[(0,a.jsx)("h3",{children:"\xbfC\xf3mo contin\xfaa la historia?"}),(0,a.jsx)("p",{children:"Elige el camino que tomar\xe1 tu protagonista:"})]}),(0,a.jsx)("div",{className:"decision-options",children:p.map((e,t)=>(0,a.jsxs)("button",{className:"decision-btn",onClick:()=>(async e=>{l(!0),d([]);try{const t={...n,prompt:`Contin\xfaa esta historia cultural bas\xe1ndote en la decisi\xf3n elegida:\n\nHISTORIA HASTA AHORA:\n${i.join("\n\n--- CAP\xcdTULO ANTERIOR ---\n\n")}\n\nDECISI\xd3N ELEGIDA: ${e.option}) ${e.text}\n\nINSTRUCCIONES:\n- Contin\xfaa la narrativa desde la decisi\xf3n elegida\n- Mant\xe9n el mismo estilo y tono cultural\n- Desarrolla las consecuencias de la elecci\xf3n\n- Si la historia puede continuar, incluye nuevas decisiones al final\n- Si es un final natural, concluye la historia apropiadamente\n- M\xe1ximo 400 palabras para este cap\xedtulo\n\nContin\xfaa la historia:`},r=await(0,u.generateCulturalStory)(t);s(e=>[...e,r])}catch(t){console.error("Error al continuar la historia:",t),s(t=>[...t,`Los c\xf3dices ancestrales se han difuminado... La historia contin\xfaa seg\xfan tu elecci\xf3n: ${e.text}\n\n(Error al generar continuaci\xf3n. Intenta recargar la p\xe1gina.)`])}finally{l(!1)}})(e),children:[(0,a.jsxs)("span",{className:"decision-letter",children:[e.option,")"]}),(0,a.jsx)("span",{className:"decision-text",children:e.text})]},t))})]}),0===p.length&&!o&&i.length>1&&(0,a.jsxs)("div",{className:"story-completed",children:[(0,a.jsx)("div",{className:"completion-icon",children:"\ud83c\udfad"}),(0,a.jsx)("h3",{children:"Historia Completada"}),(0,a.jsx)("p",{children:"Tu cuento cultural ha llegado a su fin. \xa1Que los ancestros bendigan esta narrativa!"})]})]}),(0,a.jsx)("style",{jsx:!0,children:"\n        .interactive-story-container {\n          max-width: 100%;\n          margin: 0 auto;\n        }\n\n        .story-chapter {\n          margin-bottom: 1.5rem;\n        }\n\n        .chapter-divider {\n          text-align: center;\n          font-size: 1.5rem;\n          color: #6366f1;\n          margin: 2rem 0;\n          font-weight: bold;\n        }\n\n        .story-text {\n          line-height: 1.8;\n          color: #334155;\n          font-size: 1rem;\n          text-align: justify;\n          white-space: pre-wrap;\n        }\n\n        .decision-loading {\n          text-align: center;\n          padding: 2rem;\n          background: rgba(99, 102, 241, 0.05);\n          border-radius: 12px;\n          border: 1px solid #e2e8f0;\n          margin: 2rem 0;\n        }\n\n        .loading-spinner {\n          width: 40px;\n          height: 40px;\n          border: 3px solid #e2e8f0;\n          border-top: 3px solid #6366f1;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto 1rem;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .decisions-section {\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(79, 70, 229, 0.05));\n          border: 2px solid #6366f1;\n          border-radius: 16px;\n          padding: 2rem;\n          margin: 2rem 0;\n        }\n\n        .decision-prompt {\n          text-align: center;\n          margin-bottom: 2rem;\n        }\n\n        .decision-prompt h3 {\n          color: #4f46e5;\n          font-size: 1.5rem;\n          margin-bottom: 0.5rem;\n          font-weight: 700;\n        }\n\n        .decision-prompt p {\n          color: #64748b;\n          font-size: 1.1rem;\n        }\n\n        .decision-options {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n        }\n\n        .decision-btn {\n          display: flex;\n          align-items: flex-start;\n          gap: 1rem;\n          padding: 1.5rem;\n          background: rgba(255, 255, 255, 0.9);\n          border: 2px solid #e2e8f0;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          text-align: left;\n          font-family: inherit;\n        }\n\n        .decision-btn:hover {\n          border-color: #6366f1;\n          background: rgba(255, 255, 255, 1);\n          transform: translateY(-2px);\n          box-shadow: 0 8px 15px rgba(99, 102, 241, 0.15);\n        }\n\n        .decision-letter {\n          background: #6366f1;\n          color: white;\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          font-size: 1.1rem;\n          flex-shrink: 0;\n        }\n\n        .decision-text {\n          flex: 1;\n          color: #334155;\n          font-size: 1rem;\n          line-height: 1.5;\n          font-weight: 500;\n        }\n\n        .story-completed {\n          text-align: center;\n          padding: 3rem 2rem;\n          background: linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(16, 185, 129, 0.05));\n          border: 2px solid #10b981;\n          border-radius: 16px;\n          margin: 2rem 0;\n        }\n\n        .completion-icon {\n          font-size: 3rem;\n          margin-bottom: 1rem;\n        }\n\n        .story-completed h3 {\n          color: #059669;\n          font-size: 1.5rem;\n          margin-bottom: 1rem;\n          font-weight: 700;\n        }\n\n        .story-completed p {\n          color: #64748b;\n          font-size: 1.1rem;\n          font-style: italic;\n        }\n\n        @media (max-width: 768px) {\n          .decisions-section {\n            padding: 1.5rem;\n          }\n\n          .decision-btn {\n            padding: 1rem;\n            flex-direction: column;\n            gap: 0.75rem;\n            text-align: center;\n          }\n\n          .decision-letter {\n            align-self: center;\n          }\n        }\n      "})]})},d=e=>{let{story:t,originalFormData:n}=e;const[i,s]=(0,r.useState)([t]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)([]),[h,f]=(0,r.useState)(0),p=e=>{const t=e.split("\n"),n=[];let r=!1,i=!1;for(const s of t){if(!i&&(s.includes("[DECISI\xd3N:")||s.includes("\xbfC\xf3mo deben sellar")||s.includes("\xbfQu\xe9 decide")||s.includes("\xbfQu\xe9 hace")||s.includes("\xbfCu\xe1l es"))){i=!0,r=!0;break}if(s.match(/^[A-Z]\)/)||s.match(/^Opci\xf3n [A-Z]:/)){r=!0;break}r||s.includes("Historia interactiva completada")||s.includes("(Supongamos que")||n.push(s)}return n.join("\n").trim()},{cleanText:m,decisions:g}=(()=>{const e=i[i.length-1],t=p(e),n=(e=>{const t=e.split("\n"),n=[];let r=!1,i=!1;for(let s=0;s<t.length;s++){const e=t[s].trim();if(i||!(e.includes("[DECISI\xd3N:")||e.includes("\xbfC\xf3mo deben sellar")||e.includes("\xbfQu\xe9 decide")||e.includes("\xbfQu\xe9 hace")||e.includes("\xbfCu\xe1l es"))){if(i&&r&&(e.includes("\xbfC\xf3mo deben")||e.includes("\xbfQu\xe9 decide")||e.includes("\xbfQu\xe9 hace")||e.includes("\xbfCu\xe1l es")))break;if(r&&e.match(/^[A-Z]\)/)){const t=e.charAt(0),r=e.substring(3).trim();n.push({option:t,text:r})}if(r&&e.match(/^Opci\xf3n [A-Z]:/)){const t=e.match(/^Opci\xf3n ([A-Z]):/)[1],r=e.replace(/^Opci\xf3n [A-Z]:\s*/,"").trim();n.push({option:t,text:r})}if(n.length>=2)break}else r=!0,i=!0}return n.slice(0,2)})(e);return n.length>0&&n.length!==c.length&&d(n),{cleanText:t,decisions:n}})();return(0,a.jsxs)("div",{className:"interactive-story-container",children:[(0,a.jsxs)("div",{className:"story-content",children:[i.map((e,t)=>(0,a.jsxs)("div",{className:"story-chapter",children:[t>0&&(0,a.jsx)("div",{className:"chapter-divider",children:"\u2014 \u26a1 \u2014"}),(0,a.jsx)("div",{className:"story-text",children:(i.length,p(e))})]},t)),o&&(0,a.jsxs)("div",{className:"decision-loading",children:[(0,a.jsx)("div",{className:"loading-spinner"}),(0,a.jsx)("p",{children:"Los c\xf3dices revelan el siguiente cap\xedtulo..."})]}),g.length>0&&!o&&h<3&&(0,a.jsxs)("div",{className:"decisions-section",children:[(0,a.jsxs)("div",{className:"decision-prompt",children:[(0,a.jsx)("h3",{children:"\xbfC\xf3mo contin\xfaa la historia?"}),(0,a.jsx)("p",{children:"Elige el camino que tomar\xe1 tu protagonista:"}),(0,a.jsxs)("small",{className:"decision-counter",children:["Decisi\xf3n ",h+1," de 3"]})]}),(0,a.jsx)("div",{className:"decision-options",children:g.map((e,t)=>(0,a.jsxs)("button",{className:"decision-btn",onClick:()=>(async e=>{l(!0),d([]);const t=h+1;f(t);try{const r=t>=3,a={...n,prompt:`Contin\xfaa esta historia cultural bas\xe1ndote en la decisi\xf3n elegida:\n\nHISTORIA HASTA AHORA:\n${i.join("\n\n--- CAP\xcdTULO ANTERIOR ---\n\n")}\n\nDECISI\xd3N ELEGIDA: ${e.option}) ${e.text}\n\nINSTRUCCIONES IMPORTANTES:\n- Contin\xfaa la narrativa desde la decisi\xf3n elegida\n- Mant\xe9n el mismo estilo y tono cultural\n- Desarrolla las consecuencias de la elecci\xf3n en m\xe1ximo 300 palabras\n${r?"- ESTA ES LA DECISI\xd3N FINAL: Concluye la historia de manera satisfactoria SIN incluir m\xe1s decisiones":"- Incluye SOLO UNA nueva decisi\xf3n con EXACTAMENTE 2 opciones (A y B)"}\n- NO incluyas texto como "(Supongamos que se elige)" \n- NO resuelvas las decisiones autom\xe1ticamente\n${r?"":"- Formato de decisiones:\n  \xbf[Pregunta clara]?\n  A) [Opci\xf3n 1]\n  B) [Opci\xf3n 2]"}\n\nContin\xfaa la historia:`},o=await(0,u.generateCulturalStory)(a);s(e=>[...e,o])}catch(r){console.error("Error al continuar la historia:",r),s(t=>[...t,`Los c\xf3dices ancestrales se han difuminado... La historia contin\xfaa seg\xfan tu elecci\xf3n: ${e.text}\n\n(Error al generar continuaci\xf3n. Intenta recargar la p\xe1gina.)`])}finally{l(!1)}})(e),children:[(0,a.jsxs)("span",{className:"decision-letter",children:[e.option,")"]}),(0,a.jsx)("span",{className:"decision-text",children:e.text})]},t))})]}),(0===g.length||h>=3)&&!o&&(0,a.jsxs)("div",{className:"story-completed",children:[(0,a.jsx)("div",{className:"completion-icon",children:"\ud83c\udfad"}),(0,a.jsx)("h3",{children:"Historia Completada"}),(0,a.jsxs)("p",{children:["Tu cuento cultural ha llegado a su fin despu\xe9s de ",h," decisiones. \xa1Que los ancestros bendigan esta narrativa!"]})]})]}),(0,a.jsx)("style",{jsx:!0,children:"\n        .interactive-story-container {\n          max-width: 100%;\n          margin: 0 auto;\n        }\n\n        .story-chapter {\n          margin-bottom: 1.5rem;\n        }\n\n        .chapter-divider {\n          text-align: center;\n          font-size: 1.5rem;\n          color: #6366f1;\n          margin: 2rem 0;\n          font-weight: bold;\n        }\n\n        .story-text {\n          line-height: 1.8;\n          color: #334155;\n          font-size: 1rem;\n          text-align: justify;\n          white-space: pre-wrap;\n        }\n\n        .decision-loading {\n          text-align: center;\n          padding: 2rem;\n          background: rgba(99, 102, 241, 0.05);\n          border-radius: 12px;\n          border: 1px solid #e2e8f0;\n          margin: 2rem 0;\n        }\n\n        .loading-spinner {\n          width: 40px;\n          height: 40px;\n          border: 3px solid #e2e8f0;\n          border-top: 3px solid #6366f1;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto 1rem;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .decisions-section {\n          background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(79, 70, 229, 0.05));\n          border: 2px solid #6366f1;\n          border-radius: 16px;\n          padding: 2rem;\n          margin: 2rem 0;\n        }\n\n        .decision-prompt {\n          text-align: center;\n          margin-bottom: 2rem;\n        }\n\n        .decision-prompt h3 {\n          color: #4f46e5;\n          font-size: 1.5rem;\n          margin-bottom: 0.5rem;\n          font-weight: 700;\n        }\n\n        .decision-prompt p {\n          color: #64748b;\n          font-size: 1.1rem;\n        }\n\n        .decision-counter {\n          display: block;\n          margin-top: 0.5rem;\n          color: #6366f1;\n          font-weight: 600;\n          font-size: 0.9rem;\n        }\n\n        .decision-options {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n        }\n\n        .decision-btn {\n          display: flex;\n          align-items: flex-start;\n          gap: 1rem;\n          padding: 1.5rem;\n          background: rgba(255, 255, 255, 0.9);\n          border: 2px solid #e2e8f0;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          text-align: left;\n          font-family: inherit;\n        }\n\n        .decision-btn:hover {\n          border-color: #6366f1;\n          background: rgba(255, 255, 255, 1);\n          transform: translateY(-2px);\n          box-shadow: 0 8px 15px rgba(99, 102, 241, 0.15);\n        }\n\n        .decision-letter {\n          background: #6366f1;\n          color: white;\n          width: 32px;\n          height: 32px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          font-size: 1.1rem;\n          flex-shrink: 0;\n        }\n\n        .decision-text {\n          flex: 1;\n          color: #334155;\n          font-size: 1rem;\n          line-height: 1.5;\n          font-weight: 500;\n        }\n\n        .story-completed {\n          text-align: center;\n          padding: 3rem 2rem;\n          background: linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(16, 185, 129, 0.05));\n          border: 2px solid #10b981;\n          border-radius: 16px;\n          margin: 2rem 0;\n        }\n\n        .completion-icon {\n          font-size: 3rem;\n          margin-bottom: 1rem;\n        }\n\n        .story-completed h3 {\n          color: #059669;\n          font-size: 1.5rem;\n          margin-bottom: 1rem;\n          font-weight: 700;\n        }\n\n        .story-completed p {\n          color: #64748b;\n          font-size: 1.1rem;\n          font-style: italic;\n        }\n\n        @media (max-width: 768px) {\n          .decisions-section {\n            padding: 1.5rem;\n          }\n\n          .decision-btn {\n            padding: 1rem;\n            flex-direction: column;\n            gap: 0.75rem;\n            text-align: center;\n          }\n\n          .decision-letter {\n            align-self: center;\n          }\n        }\n      "})]})},h=()=>(0,a.jsxs)("div",{className:"loading-container",children:[(0,a.jsx)("div",{className:"loading-spinner"}),(0,a.jsxs)("div",{className:"loading-text",children:[(0,a.jsx)("h3",{children:"Generando tu cuento..."}),(0,a.jsx)("p",{children:"La IA est\xe1 creando una historia \xfanica para ti"})]})]}),f=e=>{let{onSuggestion:t}=e;const[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)([{id:1,type:"assistant",text:"\xa1Tlazocamati! Soy Mocti, tu gu\xeda espiritual de los cuentos ancestrales. \xbfQu\xe9 historia de nuestros antepasados quieres crear hoy?",timestamp:new Date}]),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(85),[m,g]=(0,r.useState)(-1),[y,v]=(0,r.useState)(!0),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!i){const e=setInterval(()=>{p(e=>{const t=e+.15*m;return t>=85?(g(-1),85):t<=65?(g(1),65):t})},100);return()=>clearInterval(e)}},[m,i]);(0,r.useEffect)(()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[o]);const w=async()=>{if(!u.trim())return;const e={id:Date.now(),type:"user",text:u,timestamp:new Date};l(t=>[...t,e]),c(""),h(!0);try{const e=await(async e=>{try{const{generateCulturalStory:t}=await Promise.resolve().then(n.bind(n,188)),r={cultura:"general",protagonista:"Usuario consultando",configuracion:"Chat de asistencia",tema:`Consulta sobre: ${e}`,tono:"conversacional",longitud:"corta",incluirDialogos:!1,incluirDecisiones:!1,prompt:`Eres Mocti, un asistente inteligente especializado en cultura mexicana y creaci\xf3n de cuentos. \n\nEL USUARIO TE PREGUNTA: "${e}"\n\nINSTRUCCIONES PARA RESPONDER:\n- Responde de manera conversacional y natural\n- Si la pregunta es sobre culturas mexicanas (mexica, maya, zapoteca), da informaci\xf3n espec\xedfica y detallada\n- Si preguntan sobre personajes, lugares, historia, elementos culturales, responde con conocimiento profundo\n- Si preguntan sobre el software, ay\xfadalos a usar el generador de cuentos\n- Si preguntan sobre c\xf3mo crear historias, da consejos creativos\n- Usa ocasionalmente "Tlazocamati" y "joven tlacuilo" pero no en exceso\n- Responde m\xe1ximo 150 palabras\n- S\xe9 \xfatil, informativo y amigable\n- Si no sabes algo espec\xedfico, adm\xedtelo y sugiere alternativas\n\nIMPORTANTE: Responde SOLO la respuesta de Mocti, sin explicaciones adicionales o formato especial.`};let i=(await t(r)).replace(/^\*\*.*?\*\*\s*/,"");return i=i.replace(/^#.*?\n/,""),i=i.replace(/^\d+\.\s*/,""),i=i.trim(),i||"Disculpa, los c\xf3dices ancestrales est\xe1n confusos. \xbfPodr\xedas reformular tu pregunta?"}catch(t){console.error("Error al generar respuesta de Mocti:",t);const n=e.toLowerCase();return n.includes("funciona")||n.includes("software")||n.includes("app")?"Este generador te ayuda a crear cuentos aut\xe9nticos de culturas mexicanas. Selecciona una cultura (mexica, maya o zapoteca), describe tu protagonista y tema, y yo crearemos una historia juntos. \xbfQu\xe9 tipo de cuento te gustar\xeda crear?":n.includes("moctezuma")||n.includes("donde")?"Moctezuma Xocoyotzin gobern\xf3 desde Tenochtitlan, la gran capital mexica construida sobre el lago Texcoco. Su palacio ten\xeda jardines, aviarios y bibliotecas de c\xf3dices. \xbfTe interesa crear una historia ambientada en su \xe9poca?":n.includes("maya")?"Los mayas desarrollaron escritura jerogl\xedfica, astronom\xeda avanzada y arquitectura monumental. Ciudades como Tikal, Palenque y Chich\xe9n Itz\xe1 fueron centros de poder. Sus sacerdotes-astr\xf3nomos predec\xedan eclipses y crearon calendarios precisos. \xbfQu\xe9 aspecto maya te fascina m\xe1s?":n.includes("mexica")||n.includes("azteca")?"Los mexicas construyeron un imperio desde Tenochtitlan. Ten\xedan guerreros jaguar y \xe1guila, sacerdotes de Quetzalc\xf3atl, tlacuilos que pintaban c\xf3dices, y pochtecas comerciantes. Su sociedad era altamente organizada con calm\xe9cacs para educar nobles. \xbfQu\xe9 per\xedodo mexica te interesa?":n.includes("zapoteca")?"Los zapotecas dominaron Oaxaca desde Monte Alb\xe1n, una ciudad en las monta\xf1as con observatorio astron\xf3mico. Fueron excelentes artesanos del jade, tejedores de textiles complejos y constructores de tumbas elaboradas. La Guelaguetza celebra su legado. \xbfQu\xe9 tradici\xf3n zapoteca explorar\xedas?":"Disculpa, mi conexi\xf3n con los c\xf3dices ancestrales fall\xf3. Puedes preguntarme sobre culturas mexicanas, c\xf3mo usar este generador de cuentos, o cualquier aspecto de la historia y tradiciones de M\xe9xico. \xbfEn qu\xe9 te puedo ayudar?"}})(u),t={id:Date.now()+1,type:"assistant",text:e,timestamp:new Date};l(e=>[...e,t])}catch(t){console.error("Error en respuesta de Mocti:",t);const e={id:Date.now()+1,type:"assistant",text:"Los esp\xedritus ancestrales me confunden... Intenta preguntarme sobre culturas mexica, maya o zapoteca, joven tlacuilo.",timestamp:new Date};l(t=>[...t,e])}finally{h(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mocti-character "+(i?"mocti-stationary":""),style:{left:`${f}%`},onClick:()=>{s(!i),v(!y)},children:[(0,a.jsxs)("div",{className:"mocti-body "+(-1===m?"facing-left":"facing-right"),children:[(0,a.jsxs)("div",{className:"mocti-head",children:[(0,a.jsx)("div",{className:"mocti-feathers"}),(0,a.jsx)("div",{className:"mocti-face",children:(0,a.jsxs)("div",{className:"mocti-eyes",children:[(0,a.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,a.jsx)("span",{children:"\ud83d\udc41\ufe0f"})]})})]}),(0,a.jsx)("div",{className:"mocti-torso"}),(0,a.jsx)("div",{className:"mocti-skirt"}),(0,a.jsxs)("div",{className:"mocti-legs "+(y?"walking":""),children:[(0,a.jsx)("div",{className:"leg left"}),(0,a.jsx)("div",{className:"leg right"})]}),(0,a.jsx)("div",{className:"mocti-spear"})]}),!i&&(0,a.jsx)("div",{className:"thought-bubble",children:(0,a.jsx)("span",{children:"\ud83d\udcad"})})]}),i&&(0,a.jsx)("div",{className:"mocti-chat-overlay",children:(0,a.jsxs)("div",{className:"mocti-chat-container",children:[(0,a.jsxs)("div",{className:"chat-header",children:[(0,a.jsxs)("div",{className:"header-info",children:[(0,a.jsx)("div",{className:"mocti-avatar",children:(0,a.jsx)("span",{children:"\ud83d\udc51"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"Mocti"}),(0,a.jsx)("span",{children:"Gu\xeda Cultural Ancestral"})]})]}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"close-btn",children:"\u2715"})]}),(0,a.jsxs)("div",{className:"chat-messages",children:[o.map(e=>(0,a.jsxs)("div",{className:`message ${e.type}`,children:["assistant"===e.type&&(0,a.jsx)("div",{className:"message-avatar",children:"\ud83d\udc51"}),(0,a.jsxs)("div",{className:"message-content",children:[(0,a.jsx)("p",{children:e.text}),(0,a.jsx)("span",{className:"message-time",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},e.id)),d&&(0,a.jsxs)("div",{className:"message assistant",children:[(0,a.jsx)("div",{className:"message-avatar",children:"\ud83d\udc51"}),(0,a.jsx)("div",{className:"message-content typing",children:(0,a.jsxs)("div",{className:"typing-dots",children:[(0,a.jsx)("span",{}),(0,a.jsx)("span",{}),(0,a.jsx)("span",{})]})})]}),(0,a.jsx)("div",{ref:b})]}),(0,a.jsxs)("div",{className:"chat-input",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&w()},placeholder:"Preg\xfantale a Mocti sobre culturas ancestrales...",className:"message-input"}),(0,a.jsx)("button",{onClick:w,className:"send-btn",children:"\ud83d\ude80"})]})]})}),(0,a.jsx)("style",{jsx:!0,children:"\n        .mocti-character {\n          position: fixed;\n          bottom: 20px;\n          z-index: 1000;\n          cursor: pointer;\n          transition: all 0.3s ease;\n        }\n\n        .mocti-character:hover {\n          transform: scale(1.1);\n        }\n\n        .mocti-body {\n          position: relative;\n          width: 70px;\n          height: 90px;\n          transition: transform 0.3s ease;\n        }\n\n        .facing-left {\n          transform: scaleX(-1);\n        }\n\n        .facing-right {\n          transform: scaleX(1);\n        }\n\n        .mocti-head {\n          position: relative;\n          width: 36px;\n          height: 36px;\n          background: #CD853F;\n          border-radius: 50%;\n          margin: 0 auto 3px;\n          border: 2px solid #8B4513;\n          overflow: hidden;\n        }\n\n        .mocti-feathers {\n          position: absolute;\n          top: -20px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 25px;\n          height: 35px;\n          background: linear-gradient(45deg, #FF6347, #FFD700);\n          border-radius: 50% 50% 40% 40%;\n          border: 2px solid #8B4513;\n        }\n\n        .mocti-feathers::before {\n          content: '';\n          position: absolute;\n          top: 2px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 15px;\n          height: 25px;\n          background: #FF6347;\n          border-radius: 50% 50% 30% 30%;\n        }\n\n        .mocti-face {\n          position: absolute;\n          top: 8px;\n          left: 6px;\n          width: 24px;\n          height: 20px;\n        }\n\n        .mocti-eyes {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 3px;\n        }\n\n        .mocti-eyes span {\n          font-size: 6px;\n          color: white;\n          background: #000;\n          border-radius: 50%;\n          width: 8px;\n          height: 8px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .mocti-face::after {\n          content: '';\n          position: absolute;\n          bottom: 2px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 8px;\n          height: 3px;\n          background: #654321;\n          border-radius: 2px;\n        }\n\n        .mocti-torso {\n          position: relative;\n          width: 32px;\n          height: 28px;\n          background: #D2691E;\n          margin: 0 auto 2px;\n          border-radius: 6px;\n          border: 2px solid #8B4513;\n        }\n\n        .mocti-torso::before {\n          content: '';\n          position: absolute;\n          top: 5px;\n          left: 3px;\n          width: 26px;\n          height: 3px;\n          background: #8B4513;\n          border-radius: 2px;\n        }\n\n        .mocti-torso::after {\n          content: '';\n          position: absolute;\n          top: 12px;\n          left: 6px;\n          width: 20px;\n          height: 2px;\n          background: #654321;\n          border-radius: 1px;\n        }\n\n        .mocti-skirt {\n          position: relative;\n          width: 40px;\n          height: 18px;\n          background: #FFD700;\n          margin: 0 auto 3px;\n          border-radius: 0 0 8px 8px;\n          border: 2px solid #DAA520;\n          border-top: none;\n        }\n\n        .mocti-skirt::before {\n          content: '';\n          position: absolute;\n          bottom: -8px;\n          left: 0;\n          width: 100%;\n          height: 8px;\n          background: repeating-linear-gradient(\n            90deg,\n            #FFD700 0px,\n            #FFD700 3px,\n            #DAA520 3px,\n            #DAA520 4px\n          );\n          border-radius: 0 0 6px 6px;\n        }\n\n        .mocti-legs {\n          display: flex;\n          justify-content: space-around;\n          width: 26px;\n          margin: 0 auto;\n        }\n\n        .leg {\n          width: 7px;\n          height: 16px;\n          background: #CD853F;\n          border-radius: 3px;\n          border: 1px solid #8B4513;\n        }\n\n        .mocti-spear {\n          position: absolute;\n          right: -15px;\n          top: 5px;\n          width: 4px;\n          height: 45px;\n          background: #8B4513;\n          border-radius: 2px;\n          transform-origin: bottom;\n        }\n\n        .mocti-spear::before {\n          content: '';\n          position: absolute;\n          top: -8px;\n          left: -3px;\n          width: 10px;\n          height: 15px;\n          background: #CD853F;\n          clip-path: polygon(50% 0%, 0% 100%, 100% 100%);\n        }\n\n        .walking .leg {\n          animation: walk 2s infinite;\n        }\n\n        .walking .leg.right {\n          animation-delay: 1s;\n        }\n\n        .walking .mocti-spear {\n          animation: spearWalk 2s infinite;\n        }\n\n        @keyframes walk {\n          0%, 100% { transform: translateY(0) rotate(0deg); }\n          50% { transform: translateY(-2px) rotate(5deg); }\n        }\n\n        @keyframes spearWalk {\n          0%, 100% { transform: rotate(-3deg); }\n          50% { transform: rotate(3deg); }\n        }\n\n        .thought-bubble {\n          position: absolute;\n          top: -30px;\n          right: -10px;\n          font-size: 20px;\n          animation: float 2s ease-in-out infinite;\n        }\n\n        @keyframes float {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-5px); }\n        }\n\n        .mocti-chat-overlay {\n          position: fixed;\n          bottom: 120px;\n          right: 20px;\n          z-index: 1001;\n          width: 350px;\n          height: 500px;\n          max-height: calc(100vh - 150px);\n          background: rgba(255, 255, 255, 0.98);\n          border-radius: 20px;\n          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);\n          backdrop-filter: blur(10px);\n          border: 2px solid #e2e8f0;\n          display: flex;\n          flex-direction: column;\n          overflow: hidden;\n        }\n\n        .chat-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 1rem;\n          border-bottom: 1px solid #e2e8f0;\n          background: linear-gradient(135deg, #4f46e5, #6366f1);\n          color: white;\n          border-radius: 18px 18px 0 0;\n        }\n\n        .header-info {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n        }\n\n        .mocti-avatar {\n          width: 40px;\n          height: 40px;\n          background: rgba(255, 255, 255, 0.2);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.5rem;\n        }\n\n        .header-info h3 {\n          margin: 0;\n          font-size: 1.1rem;\n          font-weight: 600;\n        }\n\n        .header-info span {\n          font-size: 0.85rem;\n          opacity: 0.9;\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          color: white;\n          font-size: 1.2rem;\n          cursor: pointer;\n          padding: 0.25rem;\n          border-radius: 4px;\n          transition: background-color 0.2s;\n        }\n\n        .close-btn:hover {\n          background: rgba(255, 255, 255, 0.2);\n        }\n\n        .chat-messages {\n          flex: 1;\n          overflow-y: auto;\n          padding: 1rem;\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n          max-height: 350px;\n          min-height: 300px;\n        }\n\n        .chat-messages::-webkit-scrollbar {\n          width: 6px;\n        }\n\n        .chat-messages::-webkit-scrollbar-track {\n          background: #f1f5f9;\n          border-radius: 3px;\n        }\n\n        .chat-messages::-webkit-scrollbar-thumb {\n          background: #cbd5e1;\n          border-radius: 3px;\n        }\n\n        .chat-messages::-webkit-scrollbar-thumb:hover {\n          background: #94a3b8;\n        }\n\n        .message {\n          display: flex;\n          gap: 0.5rem;\n          animation: slideIn 0.3s ease;\n        }\n\n        .message.user {\n          flex-direction: row-reverse;\n        }\n\n        .message-avatar {\n          width: 32px;\n          height: 32px;\n          background: linear-gradient(135deg, #4f46e5, #6366f1);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1rem;\n          flex-shrink: 0;\n        }\n\n        .message-content {\n          max-width: 80%;\n          padding: 0.75rem 1rem;\n          border-radius: 18px;\n          position: relative;\n        }\n\n        .message.assistant .message-content {\n          background: #f1f5f9;\n          color: #334155;\n        }\n\n        .message.user .message-content {\n          background: linear-gradient(135deg, #4f46e5, #6366f1);\n          color: white;\n        }\n\n        .message-content p {\n          margin: 0;\n          line-height: 1.4;\n        }\n\n        .message-time {\n          font-size: 0.7rem;\n          opacity: 0.7;\n          margin-top: 0.25rem;\n          display: block;\n        }\n\n        .typing-dots {\n          display: flex;\n          gap: 0.25rem;\n          padding: 0.5rem 0;\n        }\n\n        .typing-dots span {\n          width: 8px;\n          height: 8px;\n          background: #94a3b8;\n          border-radius: 50%;\n          animation: typing 1.5s infinite;\n        }\n\n        .typing-dots span:nth-child(2) {\n          animation-delay: 0.2s;\n        }\n\n        .typing-dots span:nth-child(3) {\n          animation-delay: 0.4s;\n        }\n\n        @keyframes typing {\n          0%, 60%, 100% { transform: translateY(0); }\n          30% { transform: translateY(-10px); }\n        }\n\n        @keyframes slideIn {\n          from { opacity: 0; transform: translateY(10px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n\n        .chat-input {\n          display: flex;\n          padding: 1rem;\n          border-top: 1px solid #e2e8f0;\n          gap: 0.5rem;\n        }\n\n        .message-input {\n          flex: 1;\n          padding: 0.75rem 1rem;\n          border: 2px solid #e2e8f0;\n          border-radius: 25px;\n          outline: none;\n          font-size: 0.9rem;\n          transition: border-color 0.2s;\n        }\n\n        .message-input:focus {\n          border-color: #4f46e5;\n        }\n\n        .send-btn {\n          width: 44px;\n          height: 44px;\n          background: linear-gradient(135deg, #4f46e5, #6366f1);\n          border: none;\n          border-radius: 50%;\n          color: white;\n          font-size: 1rem;\n          cursor: pointer;\n          transition: transform 0.2s;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .send-btn:hover {\n          transform: scale(1.05);\n        }\n\n        @media (max-width: 768px) {\n          .mocti-chat-overlay {\n            right: 10px;\n            left: 10px;\n            width: auto;\n            bottom: 100px;\n          }\n        }\n      "})]})},p=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(p(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new g;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class g extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y=function(e){return function(e){const t=p(e);return m.encodeByteArray(t,!0)}(e).replace(/\./g,"")},v=function(e){try{return m.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const b=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,w=()=>{try{return b()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Mictl-n-Sonoro",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"tu_firebase_key",REACT_APP_FIREBASE_AUTH_DOMAIN:"tu-proyecto.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"tu-proyecto-id",REACT_APP_GEMINI_API_KEY:"AIzaSyB88-nL8SAbqGCcJ6SoMLwB-52SV66JvUE"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&v(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},E=e=>{const t=(e=>{var t,n;return null===(n=null===(t=w())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},S=()=>{var e;return null===(e=w())||void 0===e?void 0:e.config};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function C(){return!function(){var e;const t=null===(e=w())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){try{return"object"===typeof indexedDB}catch(e){return!1}}function k(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class I extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,I.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(A,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new I(n,s,t)}}const A=/\{\$([^}]+)}/g;function D(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(R(n)&&R(s)){if(!D(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function R(e){return null!==e&&"object"===typeof e}function O(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function L(e){return e&&e._delegate?e._delegate:e}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const M="[DEFAULT]";class j{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:M})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===M?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?e:M:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class F{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const U=[];var V;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(V||(V={}));const z={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},B=V.INFO,$={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},q=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=$[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class H{constructor(e){this.name=e,this._logLevel=B,this._logHandler=q,this._userLogHandler=null,U.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in V))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?z[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...t),this._logHandler(this,V.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...t),this._logHandler(this,V.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.INFO,...t),this._logHandler(this,V.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.WARN,...t),this._logHandler(this,V.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,V.ERROR,...t),this._logHandler(this,V.ERROR,...t)}}let K,G;const Q=new WeakMap,W=new WeakMap,Y=new WeakMap,X=new WeakMap,J=new WeakMap;let Z={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Y.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ne(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ee(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(re(this),n),ne(Q.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ne(e.apply(re(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(re(this),t,...r);return Y.set(s,t.sort?t.sort():[t]),ne(s)}}function te(e){return"function"===typeof e?ee(e):(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});W.set(e,t)}(e),t=e,(K||(K=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Z):e);var t}function ne(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ne(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Q.set(t,e)}).catch(()=>{}),J.set(t,e),t}(e);if(X.has(e))return X.get(e);const t=te(e);return t!==e&&(X.set(e,t),J.set(t,e)),t}const re=e=>J.get(e);function ie(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ne(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ne(a.result),e.oldVersion,e.newVersion,ne(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const se=["get","getKey","getAll","getAllKeys","count"],ae=["put","add","delete","clear"],oe=new Map;function le(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(oe.get(t))return oe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!se.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return oe.set(t,s),s}Z=(e=>({...e,get:(t,n,r)=>le(t,n)||e.get(t,n,r),has:(t,n)=>!!le(t,n)||e.has(t,n)}))(Z);class ue{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const ce="@firebase/app",de="0.10.13",he=new H("@firebase/app"),fe="@firebase/app-compat",pe="@firebase/analytics-compat",me="@firebase/analytics",ge="@firebase/app-check-compat",ye="@firebase/app-check",ve="@firebase/auth",be="@firebase/auth-compat",we="@firebase/database",Ee="@firebase/data-connect",Se="@firebase/database-compat",xe="@firebase/functions",_e="@firebase/functions-compat",Ce="@firebase/installations",Te="@firebase/installations-compat",ke="@firebase/messaging",Ie="@firebase/messaging-compat",Ne="@firebase/performance",Ae="@firebase/performance-compat",De="@firebase/remote-config",Re="@firebase/remote-config-compat",Oe="@firebase/storage",Le="@firebase/storage-compat",Pe="@firebase/firestore",Me="@firebase/vertexai-preview",je="@firebase/firestore-compat",Fe="firebase",Ue="[DEFAULT]",Ve={[ce]:"fire-core",[fe]:"fire-core-compat",[me]:"fire-analytics",[pe]:"fire-analytics-compat",[ye]:"fire-app-check",[ge]:"fire-app-check-compat",[ve]:"fire-auth",[be]:"fire-auth-compat",[we]:"fire-rtdb",[Ee]:"fire-data-connect",[Se]:"fire-rtdb-compat",[xe]:"fire-fn",[_e]:"fire-fn-compat",[Ce]:"fire-iid",[Te]:"fire-iid-compat",[ke]:"fire-fcm",[Ie]:"fire-fcm-compat",[Ne]:"fire-perf",[Ae]:"fire-perf-compat",[De]:"fire-rc",[Re]:"fire-rc-compat",[Oe]:"fire-gcs",[Le]:"fire-gcs-compat",[Pe]:"fire-fst",[je]:"fire-fst-compat",[Me]:"fire-vertex","fire-js":"fire-js",[Fe]:"fire-js-all"},ze=new Map,Be=new Map,$e=new Map;function qe(e,t){try{e.container.addComponent(t)}catch(n){he.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function He(e){const t=e.name;if($e.has(t))return he.debug(`There were multiple attempts to register component ${t}.`),!1;$e.set(t,e);for(const n of ze.values())qe(n,e);for(const n of Be.values())qe(n,e);return!0}function Ke(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ge=new N("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Qe{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ge.create("app-deleted",{appName:this._name})}}function We(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ue,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ge.create("bad-app-name",{appName:String(i)});if(n||(n=S()),!n)throw Ge.create("no-options");const s=ze.get(i);if(s){if(D(n,s.options)&&D(r,s.config))return s;throw Ge.create("duplicate-app",{appName:i})}const a=new F(i);for(const l of $e.values())a.addComponent(l);const o=new Qe(n,r,a);return ze.set(i,o),o}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue;const t=ze.get(e);if(!t&&e===Ue&&S())return We();if(!t)throw Ge.create("no-app",{appName:e});return t}function Xe(e,t,n){var r;let i=null!==(r=Ve[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void he.warn(e.join(" "))}He(new P(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Je="firebase-heartbeat-store";let Ze=null;function et(){return Ze||(Ze=ie("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Je)}catch(n){console.warn(n)}}}).catch(e=>{throw Ge.create("idb-open",{originalErrorMessage:e.message})})),Ze}async function tt(e,t){try{const n=(await et()).transaction(Je,"readwrite"),r=n.objectStore(Je);await r.put(t,nt(e)),await n.done}catch(n){if(n instanceof I)he.warn(n.message);else{const e=Ge.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});he.warn(e.message)}}}function nt(e){return`${e.name}!${e.options.appId}`}class rt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new st(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=it();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){he.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=it(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),at(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),at(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=y(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return he.warn(t),""}}}function it(){return(new Date).toISOString().substring(0,10)}class st{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!T()&&k().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await et()).transaction(Je),n=await t.objectStore(Je).get(nt(e));return await t.done,n}catch(t){if(t instanceof I)he.warn(t.message);else{const e=Ge.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});he.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return tt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return tt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function at(e){return y(JSON.stringify({version:2,heartbeats:e})).length}var ot;ot="",He(new P("platform-logger",e=>new ue(e),"PRIVATE")),He(new P("heartbeat",e=>new rt(e),"PRIVATE")),Xe(ce,de,ot),Xe(ce,de,"esm2017"),Xe("fire-js","");var lt,ut,ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},dt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),u=s(16777216);function c(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(o,o);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=s.add(r);0>=u.l(e)&&(i=i.add(n),s=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),u=(s=a(n)).j(t);d(u)||0<u.l(e);)u=(s=a(n-=r)).j(t);c(s)&&(s=l),i=i.add(s),e=f(e,u)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(u)&&0>e.l(u))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ut=dt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),i=i.j(l).add(a(u))):i=(i=i.j(r)).add(a(u))}return i},lt=dt.Integer=r}).apply("undefined"!==typeof ct?ct:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ht,ft,pt,mt,gt,yt,vt,bt,wt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Et={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof wt&&wt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function u(e,t,n){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function x(e){i.setTimeout(()=>{throw e},0)}function _(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new T,e=>e.reset());class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let k,I=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);k=()=>{e.then(D)}};var D=()=>{for(var e;e=_();){try{e.h.call(e.g)}catch(n){x(n)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var L=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function P(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}d(P,O);var M={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function $(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=$(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function K(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.K(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)L||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[j]?e.L(t,n,a(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=$(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=$(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[q]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;E(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=u(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ue=[];function ce(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ce(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function be(){O.call(this,"c")}d(ve,O),d(be,O);var we={},Ee=null;function Se(){return Ee=Ee||new ne}function xe(e){O.call(this,we.La,e)}function _e(e){const t=Se();re(t,new xe(t))}function Ce(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=Se();re(t,new Ce(t,e))}function ke(e,t){O.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(xe,O),we.STAT_EVENT="statevent",d(Ce,O),we.Ma="timingevent",d(ke,O),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var De,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Le(){}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}d(Le,pe),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},De=new Le;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),$e(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),jt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=Cn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(u(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ue[0]=i.toString()),i=ue);for(var s=0;s<i.length;s++){var a=K(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),_e(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var u=o[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");a=2<=d.length&&"type"==d[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function $e(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(u(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||wn(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ce(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),un(n)}gn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(u(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(c){}n.ca=void 0}}else Sn(n,11)}else if((e.K||n.g==e)&&bn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.T=u[0],u=u[1],2==n.G)if("c"==u[0]){n.K=u[1],n.ia=u[2];const t=u[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=u[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ct(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=_n(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(He(o),$e(o)),r.g=a}else mn(r);0<n.i.length&&dn(n)}else"stop"!=u[0]&&"close"!=u[0]||Sn(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Sn(n,7):ln(n):"noop"!=u[0]&&n.l&&n.l.ta(u),n.v=0)}_e()}catch(c){}}Pe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const h=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=h||7==t||_e(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=sn(this.g);e="";var s=r.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var c=l;break t}}c=null}if(!(n=c)){this.o=!1,this.s=3,Te(12),Ge(this),Ke(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==h&&(this.s=4,Te(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Te(15),Ae(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),yn(d),d.M=!0,Te(11))}}else Ae(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Ae(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?wn(this.j,this):(this.o=!1,$e(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ge(this),Ke(this)}}}catch(St){}},Pe.prototype.cancel=function(){this.J=!0,Ge(this)},Pe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(_e(),Te(17)),Ge(this),this.s=2,Ke(this)):qe(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Ot;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ut(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=xt(t[2]||""),this.g=xt(t[3]||"",!0),lt(this,t[4]),this.l=xt(t[5]||"",!0),ut(this,t[6]||"",!0),this.m=xt(t[7]||"")):(this.h=!1,this.i=new Ot(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?xt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ut(e,t,n){t instanceof Ot?(e.i=t,function(e,t){t&&!e.j&&(Lt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Pt(this,t),jt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=_t(t,Dt)),e.i=new Ot(t,e.h))}function ct(e,t,n){e.i.set(t,n)}function dt(e){return ct(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function xt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_t(t,It,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(_t(t,It,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_t(n,"/"==n.charAt(0)?At:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",_t(n,Rt)),e.join("")};var kt,It=/[#\/\?@]/g,Nt=/[#\?:]/g,At=/[#\?]/g,Dt=/[#\?@]/g,Rt=/#/g;function Ot(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Lt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Pt(e,t){Lt(e),t=Ft(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Mt(e,t){return Lt(e),t=Ft(e,t),e.g.has(t)}function jt(e,t,n){Pt(e,t),0<n.length&&(e.i=null,e.g.set(Ft(e,t),h(n)),e.h+=n.length)}function Ft(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ut(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Vt(){this.g=new fe}function zt(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;a(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function $t(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ht(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Gt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ct(e,t,n))}function Wt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Ot.prototype).add=function(e,t){Lt(this),this.i=null,e=Ft(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Lt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Lt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Lt(this);let t=[];if("string"===typeof e)Mt(this,e)&&(t=t.concat(this.g.get(Ft(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Lt(this),this.i=null,Mt(this,e=Ft(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},d(Bt,pe),Bt.prototype.g=function(){return new $t(this.l,this.j)},Bt.prototype.i=(kt={},function(){return kt}),d($t,ne),(e=$t.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ht(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ht(this):Kt(this),3==this.readyState&&qt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ht(this))},e.Qa=function(e){this.g&&(this.response=e,Ht(this))},e.ga=function(){this.g&&Ht(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($t.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Wt,ne);var Yt=/^https?$/i,Xt=["POST","PUT"];function Jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Zt(e),tn(e)}function Zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Yt.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Zt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ct){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Vt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(cn(e),3==e.G){var t=e.U++,n=at(e.I);if(ct(n,"SID",e.K),ct(n,"RID",t),ct(n,"TYPE","terminate"),fn(e,n),(t=new Pe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Cn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),$e(t)}xn(e)}function un(e){e.g&&(yn(e),e.g.cancel(),e.g=null)}function cn(e){un(e),e.u&&(i.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function dn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;k||A(),I||(k(),I=!0),N.add(t,e),e.B=0}}function hn(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ct(r,"SID",e.K),ct(r,"RID",n),ct(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new Pe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function fn(e,t){e.H&&v(e.H,function(e,n){ct(t,n,e)}),e.l&&rt({},function(e,n){ct(t,n,e)})}function pn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?u(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{zt(o,e,"req"+n+"_")}catch(St){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function mn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;k||A(),I||(k(),I=!0),N.add(t,e),e.v=0}}function gn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(u(e.Fa,e),En(e,e.v)),e.v++,!0)}function yn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ct(t,"RID","rpc"),ct(t,"SID",e.K),ct(t,"AID",e.T),ct(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ct(t,"TO",e.ja),ct(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function bn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function wn(e,t){var n=null;if(e.g==t){bn(e),yn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new ke(r,n)),dn(e)}else mn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(u(e.Ga,e,t),En(e,e.B)),e.B++,!0))}(e,t)||2==r&&gn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Sn(e,5);break;case 4:Sn(e,10);break;case 3:Sn(e,6);break;default:Sn(e,2)}}function En(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function Sn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=c(Ut,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Ut,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Ut,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Ut,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Ut(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Ut(0,0,!0,t):Ut(0,0,!1,t)}).catch(()=>{clearTimeout(r),Ut(0,0,!1,t)})}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),xn(e),cn(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function _n(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ct(r,n,t),ct(r,"VER",e.la),fn(e,r),r}function Cn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Wt(new Bt({eb:n})):new Wt(e.pa)).Ha(e.J),t}function Tn(){}function kn(){}function In(e,t){ne.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Dn(this)}function Nn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function An(){be.call(this),this.status=1}function Dn(e){this.g=e}(e=Wt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():De.g(),this.v=this.o?me(this.o):me(De),this.g.onreadystatechange=u(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Wt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(kt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(kt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=_n(this,null,this.W),dn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Pe(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),E(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,i,t),ct(n=at(this.I),"RID",e),ct(n,"CVER",22),this.D&&ct(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Gt(s)))+"&"+t:this.m&&Qt(n,this.m,s)),et(this.h,i),this.Ua&&ct(n,"TYPE","init"),this.P?(ct(n,"$req",t),ct(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?hn(this,e):0==this.i.length||Xe(this.h)||hn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(u(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),un(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,un(this),gn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},kn.prototype.g=function(e,t){return new In(e,t)},d(In,ne),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){ln(this.g)},In.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&dn(t)},In.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,In.aa.N.call(this)},d(Nn,ve),d(An,be),d(Dn,Tn),Dn.prototype.ua=function(){re(this.g,"a")},Dn.prototype.ta=function(e){re(this.g,new Nn(e))},Dn.prototype.sa=function(e){re(this.g,new An)},Dn.prototype.ra=function(){re(this.g,"b")},kn.prototype.createWebChannel=kn.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,bt=Et.createWebChannelTransport=function(){return new kn},vt=Et.getStatEventTarget=function(){return Se()},yt=Et.Event=we,gt=Et.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,mt=Et.ErrorCode=Re,Oe.COMPLETE="complete",pt=Et.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ft=Et.WebChannel=ge,Et.FetchXmlHttpFactory=Bt,Wt.prototype.listenOnce=Wt.prototype.L,Wt.prototype.getLastError=Wt.prototype.Ka,Wt.prototype.getLastErrorCode=Wt.prototype.Ba,Wt.prototype.getStatus=Wt.prototype.Z,Wt.prototype.getResponseJson=Wt.prototype.Oa,Wt.prototype.getResponseText=Wt.prototype.oa,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Ha,ht=Et.XhrIo=Wt}).apply("undefined"!==typeof wt?wt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const St="@firebase/firestore";class xt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let _t="10.14.0";const Ct=new H("@firebase/firestore");function Tt(){return Ct.logLevel}function kt(e){if(Ct.logLevel<=V.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(At);Ct.debug(`Firestore (${_t}): ${e}`,...i)}}function It(e){if(Ct.logLevel<=V.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(At);Ct.error(`Firestore (${_t}): ${e}`,...i)}}function Nt(e){if(Ct.logLevel<=V.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(At);Ct.warn(`Firestore (${_t}): ${e}`,...i)}}function At(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Dt(){const e=`FIRESTORE (${_t}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw It(e),new Error(e)}function Rt(e,t){e||Dt()}function Ot(e,t){return e}const Lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pt extends I{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class jt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ft{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class Ut{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Vt{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Rt(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mt,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mt)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Rt("string"==typeof t.accessToken),new jt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new xt(e)}}class zt{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Bt{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new zt(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $t{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qt{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Rt(void 0===this.o);const n=e=>{null!=e.error&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,kt("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Rt("string"==typeof e.token),this.R=e.token,new $t(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Ht(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Kt{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Ht(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Gt(e,t){return e<t?-1:e>t?1:0}function Qt(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class Wt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pt(Lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pt(Lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wt.fromMillis(Date.now())}static fromDate(e){return Wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Wt(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Yt(e)}static min(){return new Yt(new Wt(0,0))}static max(){return new Yt(new Wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xt{constructor(e,t,n){void 0===t?t=0:t>e.length&&Dt(),void 0===n?n=e.length-t:n>e.length-t&&Dt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xt.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xt?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Xt{construct(e,t,n){return new Jt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Pt(Lt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Jt(e)}static emptyPath(){return new Jt([])}}const Zt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Xt{construct(e,t,n){return new en(e,t,n)}static isValidIdentifier(e){return Zt.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new en(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Pt(Lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Pt(Lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Pt(Lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Pt(Lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}class tn{constructor(e){this.path=e}static fromPath(e){return new tn(Jt.fromString(e))}static fromName(e){return new tn(Jt.fromString(e).popFirst(5))}static empty(){return new tn(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tn(new Jt(e.slice()))}}class nn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}nn.UNKNOWN_ID=-1;function rn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Yt.fromTimestamp(1e9===r?new Wt(n+1,0):new Wt(n,r));return new an(i,tn.empty(),t)}function sn(e){return new an(e.readTime,e.key,-1)}class an{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new an(Yt.min(),tn.empty(),-1)}static max(){return new an(Yt.max(),tn.empty(),-1)}}function on(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=tn.comparator(e.documentKey,t.documentKey),0!==n?n:Gt(e.largestBatchId,t.largestBatchId))}const ln="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class un{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function cn(e){if(e.code!==Lt.FAILED_PRECONDITION||e.message!==ln)throw e;kt("LocalStore","Unexpectedly lost primary lease")}class dn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof dn?t:dn.resolve(t)}catch(e){return dn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):dn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):dn.reject(t)}static resolve(e){return new dn((t,n)=>{t(e)})}static reject(e){return new dn((t,n)=>{n(e)})}static waitFor(e){return new dn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=dn.resolve(!1);for(const n of e)t=t.next(e=>e?dn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new dn((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new dn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function hn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fn(e){return"IndexedDbTransactionError"===e.name}class pn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function mn(e){return null==e}function gn(e){return 0===e&&1/e==-1/0}function yn(e){return"number"==typeof e&&Number.isInteger(e)&&!gn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}pn.oe=-1;const vn=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wn=bn,En=[...wn,"indexConfiguration","indexState","indexEntries"];function Sn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function xn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _n(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Cn{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new Cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tn(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tn(this.root,e,this.comparator,!0)}}class Tn{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:kn.RED,this.left=null!=r?r:kn.EMPTY,this.right=null!=i?i:kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new kn(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return kn.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dt();if(this.right.isRed())throw Dt();const e=this.left.check();if(e!==this.right.check())throw Dt();return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1,kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Dt()}get value(){throw Dt()}get color(){throw Dt()}get left(){throw Dt()}get right(){throw Dt()}copy(e,t,n,r,i){return this}insert(e,t,n){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class In{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Nn(this.data.getIterator())}getIteratorFrom(e){return new Nn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof In))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new In(this.comparator);return t.data=e,t}}class Nn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class An{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new An([])}unionWith(e){let t=new In(en.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new An(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qt(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Dn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Dn("Invalid base64 string: "+e):e}}(e);return new Rn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const On=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ln(e){if(Rt(!!e),"string"==typeof e){let t=0;const n=On.exec(e);if(Rt(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pn(e.seconds),nanos:Pn(e.nanos)}}function Pn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Mn(e){return"string"==typeof e?Rn.fromBase64String(e):Rn.fromUint8Array(e)}function jn(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Fn(e){const t=e.mapValue.fields.__previous_value__;return jn(t)?Fn(t):t}function Un(e){const t=Ln(e.mapValue.fields.__local_write_time__.timestampValue);return new Wt(t.seconds,t.nanos)}class Vn{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class zn{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zn("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zn&&e.projectId===this.projectId&&e.database===this.database}}const Bn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $n(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?jn(e)?4:sr(e)?9007199254740991:rr(e)?10:11:Dt()}function qn(e,t){if(e===t)return!0;const n=$n(e);if(n!==$n(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Un(e).isEqual(Un(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ln(e.timestampValue),r=Ln(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Mn(e.bytesValue).isEqual(Mn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pn(e.geoPointValue.latitude)===Pn(t.geoPointValue.latitude)&&Pn(e.geoPointValue.longitude)===Pn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pn(e.integerValue)===Pn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pn(e.doubleValue),r=Pn(t.doubleValue);return n===r?gn(n)===gn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Qt(e.arrayValue.values||[],t.arrayValue.values||[],qn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Sn(n)!==Sn(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qn(n[i],r[i])))return!1;return!0}(e,t);default:return Dt()}}function Hn(e,t){return void 0!==(e.values||[]).find(e=>qn(e,t))}function Kn(e,t){if(e===t)return 0;const n=$n(e),r=$n(t);if(n!==r)return Gt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pn(e.integerValue||e.doubleValue),r=Pn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Gn(e.timestampValue,t.timestampValue);case 4:return Gn(Un(e),Un(t));case 5:return Gt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Mn(e),r=Mn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Gt(n[i],r[i]);if(0!==e)return e}return Gt(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Gt(Pn(e.latitude),Pn(t.latitude));return 0!==n?n:Gt(Pn(e.longitude),Pn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Qn(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,u=null===(r=o.value)||void 0===r?void 0:r.arrayValue,c=Gt((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==u?void 0:u.values)||void 0===s?void 0:s.length)||0);return 0!==c?c:Qn(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Bn.mapValue&&t===Bn.mapValue)return 0;if(e===Bn.mapValue)return 1;if(t===Bn.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Gt(r[a],s[a]);if(0!==e)return e;const t=Kn(n[r[a]],i[s[a]]);if(0!==t)return t}return Gt(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Dt()}}function Gn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gt(e,t);const n=Ln(e),r=Ln(t),i=Gt(n.seconds,r.seconds);return 0!==i?i:Gt(n.nanos,r.nanos)}function Qn(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Kn(n[i],r[i]);if(e)return e}return Gt(n.length,r.length)}function Wn(e){return Yn(e)}function Yn(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ln(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Mn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return tn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yn(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Yn(e.fields[i])}`;return n+"}"}(e.mapValue):Dt()}function Xn(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Jn(e){return!!e&&"integerValue"in e}function Zn(e){return!!e&&"arrayValue"in e}function er(e){return!!e&&"nullValue"in e}function tr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nr(e){return!!e&&"mapValue"in e}function rr(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ir(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return xn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ir(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ir(e.arrayValue.values[n]);return t}return Object.assign({},e)}function sr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class ar{constructor(e){this.value=e}static empty(){return new ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!nr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ir(t)}setAll(e){let t=en.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ir(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());nr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];nr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){xn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ar(ir(this.value))}}function or(e){const t=[];return xn(e.fields,(e,n)=>{const r=new en([e]);if(nr(n)){const e=or(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new An(t)}class lr{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new lr(e,0,Yt.min(),Yt.min(),Yt.min(),ar.empty(),0)}static newFoundDocument(e,t,n,r){return new lr(e,1,t,Yt.min(),n,r,0)}static newNoDocument(e,t){return new lr(e,2,t,Yt.min(),Yt.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,Yt.min(),Yt.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ur{constructor(e,t){this.position=e,this.inclusive=t}}function cr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?tn.comparator(tn.fromName(a.referenceValue),n.key):Kn(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function dr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qn(e.position[n],t.position[n]))return!1;return!0}class hr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function fr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class pr{}class mr extends pr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xr(e,t,n):"array-contains"===t?new kr(e,n):"in"===t?new Ir(e,n):"not-in"===t?new Nr(e,n):"array-contains-any"===t?new Ar(e,n):new mr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _r(e,n):new Cr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kn(t,this.value)):null!==t&&$n(this.value)===$n(t)&&this.matchesComparison(Kn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends pr{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new gr(e,t)}matches(e){return yr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yr(e){return"and"===e.op}function vr(e){return br(e)&&yr(e)}function br(e){for(const t of e.filters)if(t instanceof gr)return!1;return!0}function wr(e){if(e instanceof mr)return e.field.canonicalString()+e.op.toString()+Wn(e.value);if(vr(e))return e.filters.map(e=>wr(e)).join(",");{const t=e.filters.map(e=>wr(e)).join(",");return`${e.op}(${t})`}}function Er(e,t){return e instanceof mr?function(e,t){return t instanceof mr&&e.op===t.op&&e.field.isEqual(t.field)&&qn(e.value,t.value)}(e,t):e instanceof gr?function(e,t){return t instanceof gr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Er(n,t.filters[r]),!0)}(e,t):void Dt()}function Sr(e){return e instanceof mr?function(e){return`${e.field.canonicalString()} ${e.op} ${Wn(e.value)}`}(e):e instanceof gr?function(e){return e.op.toString()+" {"+e.getFilters().map(Sr).join(" ,")+"}"}(e):"Filter"}class xr extends mr{constructor(e,t,n){super(e,t,n),this.key=tn.fromName(n.referenceValue)}matches(e){const t=tn.comparator(e.key,this.key);return this.matchesComparison(t)}}class _r extends mr{constructor(e,t){super(e,"in",t),this.keys=Tr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cr extends mr{constructor(e,t){super(e,"not-in",t),this.keys=Tr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>tn.fromName(e.referenceValue))}class kr extends mr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zn(t)&&Hn(t.arrayValue,this.value)}}class Ir extends mr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hn(this.value.arrayValue,t)}}class Nr extends mr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hn(this.value.arrayValue,t)}}class Ar extends mr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zn(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Hn(this.value.arrayValue,e))}}class Dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Rr(e){return new Dr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Or(e){const t=Ot(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>wr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),mn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Wn(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Wn(e)).join(",")),t.ue=e}return t.ue}function Lr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Er(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!dr(e.startAt,t.startAt)&&dr(e.endAt,t.endAt)}function Pr(e){return tn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Mr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jr(e,t,n,r,i,s,a,o){return new Mr(e,t,n,r,i,s,a,o)}function Fr(e){return new Mr(e)}function Ur(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Vr(e){return null!==e.collectionGroup}function zr(e){const t=Ot(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new In(en.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new hr(r,n))}),e.has(en.keyField().canonicalString())||t.ce.push(new hr(en.keyField(),n))}return t.ce}function Br(e){const t=Ot(e);return t.le||(t.le=$r(t,zr(e))),t.le}function $r(e,t){if("F"===e.limitType)return Rr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new hr(e.field,t)});const n=e.endAt?new ur(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ur(e.startAt.position,e.startAt.inclusive):null;return Rr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qr(e,t){const n=e.filters.concat([t]);return new Mr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Hr(e,t,n){return new Mr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kr(e,t){return Lr(Br(e),Br(t))&&e.limitType===t.limitType}function Gr(e){return`${Or(Br(e))}|lt:${e.limitType}`}function Qr(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Sr(e)).join(", ")}]`),mn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Wn(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Wn(e)).join(",")),`Target(${t})`}(Br(e))}; limitType=${e.limitType})`}function Wr(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):tn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zr(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zr(e),t))&&!(e.endAt&&!function(e,t,n){const r=cr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zr(e),t))}(e,t)}function Yr(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xr(e){return(t,n)=>{let r=!1;for(const i of zr(e)){const e=Jr(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Jr(e,t,n){const r=e.field.isKeyField()?tn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Kn(r,i):Dt()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dt()}}class Zr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){xn(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return _n(this.inner)}size(){return this.innerSize}}const ei=new Cn(tn.comparator);function ti(){return ei}const ni=new Cn(tn.comparator);function ri(){let e=ni;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ii(e){let t=ni;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function si(){return oi()}function ai(){return oi()}function oi(){return new Zr(e=>e.toString(),(e,t)=>e.isEqual(t))}const li=new Cn(tn.comparator),ui=new In(tn.comparator);function ci(){let e=ui;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const di=new In(Gt);function hi(){return di}function fi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gn(t)?"-0":t}}function pi(e){return{integerValue:""+e}}function mi(e,t){return yn(t)?pi(t):fi(e,t)}class gi{constructor(){this._=void 0}}function yi(e,t,n){return e instanceof wi?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&jn(t)&&(t=Fn(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ei?Si(e,t):e instanceof xi?_i(e,t):function(e,t){const n=bi(e,t),r=Ti(n)+Ti(e.Pe);return Jn(n)&&Jn(e.Pe)?pi(r):fi(e.serializer,r)}(e,t)}function vi(e,t,n){return e instanceof Ei?Si(e,t):e instanceof xi?_i(e,t):n}function bi(e,t){return e instanceof Ci?function(e){return Jn(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class wi extends gi{}class Ei extends gi{constructor(e){super(),this.elements=e}}function Si(e,t){const n=ki(t);for(const r of e.elements)n.some(e=>qn(e,r))||n.push(r);return{arrayValue:{values:n}}}class xi extends gi{constructor(e){super(),this.elements=e}}function _i(e,t){let n=ki(t);for(const r of e.elements)n=n.filter(e=>!qn(e,r));return{arrayValue:{values:n}}}class Ci extends gi{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ti(e){return Pn(e.integerValue||e.doubleValue)}function ki(e){return Zn(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ii{constructor(e,t){this.version=e,this.transformResults=t}}class Ni{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ai(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Di{}function Ri(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Bi(e.key,Ni.none()):new ji(e.key,e.data,Ni.none());{const n=e.data,r=ar.empty();let i=new In(en.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Fi(e.key,r,new An(i.toArray()),Ni.none())}}function Oi(e,t,n){e instanceof ji?function(e,t,n){const r=e.value.clone(),i=Vi(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Fi?function(e,t,n){if(!Ai(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Vi(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ui(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Li(e,t,n,r){return e instanceof ji?function(e,t,n,r){if(!Ai(e.precondition,t))return n;const i=e.value.clone(),s=zi(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Fi?function(e,t,n,r){if(!Ai(e.precondition,t))return n;const i=zi(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ui(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ai(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Pi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=bi(r.transform,e||null);null!=i&&(null===n&&(n=ar.empty()),n.set(r.field,i))}return n||null}function Mi(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Qt(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ei&&t instanceof Ei||e instanceof xi&&t instanceof xi?Qt(e.elements,t.elements,qn):e instanceof Ci&&t instanceof Ci?qn(e.Pe,t.Pe):e instanceof wi&&t instanceof wi}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ji extends Di{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Fi extends Di{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ui(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Vi(e,t,n){const r=new Map;Rt(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,vi(a,o,n[i]))}return r}function zi(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,yi(e,s,t))}return r}class Bi extends Di{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $i extends Di{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qi{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Oi(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Li(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Li(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ai();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Ri(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Yt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ci())}isEqual(e){return this.batchId===e.batchId&&Qt(this.mutations,e.mutations,(e,t)=>Mi(e,t))&&Qt(this.baseMutations,e.baseMutations,(e,t)=>Mi(e,t))}}class Hi{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Rt(e.mutations.length===n.length);let r=li;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Hi(e,t,n,r)}}class Ki{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gi{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qi,Wi;function Yi(e){switch(e){default:return Dt();case Lt.CANCELLED:case Lt.UNKNOWN:case Lt.DEADLINE_EXCEEDED:case Lt.RESOURCE_EXHAUSTED:case Lt.INTERNAL:case Lt.UNAVAILABLE:case Lt.UNAUTHENTICATED:return!1;case Lt.INVALID_ARGUMENT:case Lt.NOT_FOUND:case Lt.ALREADY_EXISTS:case Lt.PERMISSION_DENIED:case Lt.FAILED_PRECONDITION:case Lt.ABORTED:case Lt.OUT_OF_RANGE:case Lt.UNIMPLEMENTED:case Lt.DATA_LOSS:return!0}}function Xi(e){if(void 0===e)return It("GRPC error has no .code"),Lt.UNKNOWN;switch(e){case Qi.OK:return Lt.OK;case Qi.CANCELLED:return Lt.CANCELLED;case Qi.UNKNOWN:return Lt.UNKNOWN;case Qi.DEADLINE_EXCEEDED:return Lt.DEADLINE_EXCEEDED;case Qi.RESOURCE_EXHAUSTED:return Lt.RESOURCE_EXHAUSTED;case Qi.INTERNAL:return Lt.INTERNAL;case Qi.UNAVAILABLE:return Lt.UNAVAILABLE;case Qi.UNAUTHENTICATED:return Lt.UNAUTHENTICATED;case Qi.INVALID_ARGUMENT:return Lt.INVALID_ARGUMENT;case Qi.NOT_FOUND:return Lt.NOT_FOUND;case Qi.ALREADY_EXISTS:return Lt.ALREADY_EXISTS;case Qi.PERMISSION_DENIED:return Lt.PERMISSION_DENIED;case Qi.FAILED_PRECONDITION:return Lt.FAILED_PRECONDITION;case Qi.ABORTED:return Lt.ABORTED;case Qi.OUT_OF_RANGE:return Lt.OUT_OF_RANGE;case Qi.UNIMPLEMENTED:return Lt.UNIMPLEMENTED;case Qi.DATA_LOSS:return Lt.DATA_LOSS;default:return Dt()}}(Wi=Qi||(Qi={}))[Wi.OK=0]="OK",Wi[Wi.CANCELLED=1]="CANCELLED",Wi[Wi.UNKNOWN=2]="UNKNOWN",Wi[Wi.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wi[Wi.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wi[Wi.NOT_FOUND=5]="NOT_FOUND",Wi[Wi.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wi[Wi.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wi[Wi.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wi[Wi.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wi[Wi.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wi[Wi.ABORTED=10]="ABORTED",Wi[Wi.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wi[Wi.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wi[Wi.INTERNAL=13]="INTERNAL",Wi[Wi.UNAVAILABLE=14]="UNAVAILABLE",Wi[Wi.DATA_LOSS=15]="DATA_LOSS";let Ji=null;function Zi(){return new TextEncoder}const es=new lt([4294967295,4294967295],0);function ts(e){const t=Zi().encode(e),n=new ut;return n.update(t),new Uint8Array(n.digest())}function ns(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new lt([n,r],0),new lt([i,s],0)]}class rs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new is(`Invalid padding: ${t}`);if(n<0)throw new is(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new is(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new is(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=lt.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(lt.fromNumber(n)));return 1===r.compare(es)&&(r=new lt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=ts(e),[n,r]=ns(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new rs(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=ts(e),[n,r]=ns(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class is extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ss{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,as.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ss(Yt.min(),r,new Cn(Gt),ti(),ci())}}class as{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new as(n,t,ci(),ci(),ci())}}class os{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class ls{constructor(e,t){this.targetId=e,this.me=t}}class us{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rn.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class cs{constructor(){this.fe=0,this.ge=fs(),this.pe=Rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ci(),t=ci(),n=ci();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Dt()}}),new as(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=fs()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ds{constructor(e){this.Le=e,this.Be=new Map,this.ke=ti(),this.qe=hs(),this.Qe=new Cn(Gt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Pr(i))if(0===n){const e=new tn(i.path);this.Ue(t,e,lr.newNoDocument(e,Yt.min()))}else Rt(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Ji||Ji.et(function(e,t,n,r,i){var s,a,o,l,u,c;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==h?void 0:h.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==h?void 0:h.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Mn(n).toUint8Array()}catch(e){if(e instanceof Dn)return Nt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new rs(s,r,i)}catch(e){return Nt(e instanceof is?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Pr(i.target)){const t=new tn(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,lr.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=ci();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new ss(e,t,this.Qe,this.ke,n);return this.ke=ti(),this.qe=hs(),this.Qe=new Cn(Gt),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cs,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new In(Gt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||kt("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cs),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function hs(){return new Cn(tn.comparator)}function fs(){return new Cn(tn.comparator)}const ps={asc:"ASCENDING",desc:"DESCENDING"},ms={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gs={and:"AND",or:"OR"};class ys{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vs(e,t){return e.useProto3Json||mn(t)?t:{value:t}}function bs(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ws(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Es(e,t){return bs(e,t.toTimestamp())}function Ss(e){return Rt(!!e),Yt.fromTimestamp(function(e){const t=Ln(e);return new Wt(t.seconds,t.nanos)}(e))}function xs(e,t){return _s(e,t).canonicalString()}function _s(e,t){const n=function(e){return new Jt(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Cs(e){const t=Jt.fromString(e);return Rt(Hs(t)),t}function Ts(e,t){return xs(e.databaseId,t.path)}function ks(e,t){const n=Cs(t);if(n.get(1)!==e.databaseId.projectId)throw new Pt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pt(Lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new tn(Ds(n))}function Is(e,t){return xs(e.databaseId,t)}function Ns(e){const t=Cs(e);return 4===t.length?Jt.emptyPath():Ds(t)}function As(e){return new Jt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ds(e){return Rt(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rs(e,t,n){return{name:Ts(e,t),fields:n.value.mapValue.fields}}function Os(e,t){let n;if(t instanceof ji)n={update:Rs(e,t.key,t.value)};else if(t instanceof Bi)n={delete:Ts(e,t.key)};else if(t instanceof Fi)n={update:Rs(e,t.key,t.data),updateMask:qs(t.fieldMask)};else{if(!(t instanceof $i))return Dt();n={verify:Ts(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof wi)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ei)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xi)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ci)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Dt()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Es(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Dt()}(e,t.precondition)),n}function Ls(e,t){return{documents:[Is(e,t.path)]}}function Ps(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Is(e,i);const s=function(e){if(0!==e.length)return $s(gr.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:zs(e.field),direction:Fs(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=vs(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Ms(e){let t=Ns(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Rt(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=js(e);return t instanceof gr&&vr(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new hr(Bs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,mn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ur(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new ur(n,t)}(n.endAt)),jr(t,i,a,s,o,"F",l,u)}function js(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bs(e.unaryFilter.field);return mr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Bs(e.unaryFilter.field);return mr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bs(e.unaryFilter.field);return mr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bs(e.unaryFilter.field);return mr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dt()}}(e):void 0!==e.fieldFilter?function(e){return mr.create(Bs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dt()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return gr.create(e.compositeFilter.filters.map(e=>js(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dt()}}(e.compositeFilter.op))}(e):Dt()}function Fs(e){return ps[e]}function Us(e){return ms[e]}function Vs(e){return gs[e]}function zs(e){return{fieldPath:e.canonicalString()}}function Bs(e){return en.fromServerFormat(e.fieldPath)}function $s(e){return e instanceof mr?function(e){if("=="===e.op){if(tr(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NAN"}};if(er(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(tr(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NOT_NAN"}};if(er(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(e.field),op:Us(e.op),value:e.value}}}(e):e instanceof gr?function(e){const t=e.getFilters().map(e=>$s(e));return 1===t.length?t[0]:{compositeFilter:{op:Vs(e.op),filters:t}}}(e):Dt()}function qs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Hs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ks{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yt.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Yt.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Rn.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gs{constructor(e){this.ct=e}}function Qs(e){const t=Ms({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Hr(t,t.limit,"L"):t}class Ws{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pn(e.integerValue));else if("doubleValue"in e){const n=Pn(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),gn(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=Ln(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Mn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?sr(e)?this.dt(t,Number.MAX_SAFE_INTEGER):rr(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):Dt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At(Pn(a)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),tn.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ws.vt=new Ws;class Ys{constructor(){this.un=new Xs}addToCollectionParentIndex(e,t){return this.un.add(t),dn.resolve()}getCollectionParents(e,t){return dn.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return dn.resolve()}deleteFieldIndex(e,t){return dn.resolve()}deleteAllFieldIndexes(e){return dn.resolve()}createTargetIndexes(e,t){return dn.resolve()}getDocumentsMatchingTarget(e,t){return dn.resolve(null)}getIndexType(e,t){return dn.resolve(0)}getFieldIndexes(e,t){return dn.resolve([])}getNextCollectionGroupToUpdate(e){return dn.resolve(null)}getMinOffset(e,t){return dn.resolve(an.min())}getMinOffsetFromCollectionGroup(e,t){return dn.resolve(an.min())}updateCollectionGroup(e,t,n){return dn.resolve()}updateIndexEntries(e,t){return dn.resolve()}}class Xs{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new In(Jt.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new In(Jt.comparator)).toArray()}}new Uint8Array(0);class Js{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Js(e,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(41943040,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);class Zs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zs(0)}static kn(){return new Zs(-1)}}class ea{constructor(){this.changes=new Zr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?dn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ta{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class na{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Li(n.mutation,e,An.empty(),Wt.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ci()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci();const r=si();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ri();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=si();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ci()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ti();const s=oi(),a=oi();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Fi)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Li(a.mutation,t,a.mutation.getFieldMask(),Wt.now())):s.set(t.key,An.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ta(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=oi();let r=new Cn((e,t)=>e-t),i=ci();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||An.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||ci()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,u=ai();l.forEach(e=>{if(!i.has(e)){const r=Ri(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return dn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return tn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Vr(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):dn.resolve(si());let a=-1,o=i;return s.next(t=>dn.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?dn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,ci())).next(e=>({batchId:a,changes:ii(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tn(t)).next(e=>{let t=ri();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ri();return this.indexManager.getCollectionParents(e,i).next(a=>dn.forEach(a,a=>{const o=function(e,t){return new Mr(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,lr.newInvalidDocument(r)))});let n=ri();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Li(s.mutation,r,An.empty(),Wt.now()),Wr(t,r)&&(n=n.insert(e,r))}),n})}}class ra{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return dn.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ss(e.createTime)}}(t)),dn.resolve()}getNamedQuery(e,t){return dn.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:Qs(e.bundledQuery),readTime:Ss(e.readTime)}}(t)),dn.resolve()}}class ia{constructor(){this.overlays=new Cn(tn.comparator),this.Ir=new Map}getOverlay(e,t){return dn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=si();return dn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),dn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),dn.resolve()}getOverlaysForCollection(e,t,n){const r=si(),i=t.length+1,s=new tn(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return dn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Cn((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=si(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=si(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return dn.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Ki(t,n));let i=this.Ir.get(t);void 0===i&&(i=ci(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class sa{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return dn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,dn.resolve()}}class aa{constructor(){this.Tr=new In(oa.Er),this.dr=new In(oa.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new oa(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new oa(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new tn(new Jt([])),n=new oa(t,e),r=new oa(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new tn(new Jt([])),n=new oa(t,e),r=new oa(t,e+1);let i=ci();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new oa(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class oa{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return tn.comparator(e.key,t.key)||Gt(e.wr,t.wr)}static Ar(e,t){return Gt(e.wr,t.wr)||tn.comparator(e.key,t.key)}}class la{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new In(oa.Er)}checkEmpty(e){return dn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new qi(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.br=this.br.add(new oa(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return dn.resolve(s)}lookupMutationBatch(e,t){return dn.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return dn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return dn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return dn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new oa(t,0),r=new oa(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),dn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new In(Gt);return t.forEach(e=>{const t=new oa(e,0),r=new oa(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),dn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;tn.isDocumentKey(i)||(i=i.child(""));const s=new oa(new tn(i),0);let a=new In(Gt);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.wr)),!0)},s),dn.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Rt(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return dn.forEach(t.mutations,r=>{const i=new oa(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new oa(t,0),r=this.br.firstAfterOrEqual(n);return dn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,dn.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ua{constructor(e){this.Mr=e,this.docs=new Cn(tn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return dn.resolve(n?n.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let n=ti();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():lr.newInvalidDocument(e))}),dn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ti();const s=t.path,a=new tn(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||on(sn(a),n)<=0||(r.has(a.key)||Wr(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return dn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Dt()}Or(e,t){return dn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ca(this)}getSize(e){return dn.resolve(this.size)}}class ca extends ea{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),dn.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class da{constructor(e){this.persistence=e,this.Nr=new Zr(e=>Or(e),Lr),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new aa,this.targetCount=0,this.kr=Zs.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),dn.resolve()}getLastRemoteSnapshotVersion(e){return dn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dn.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),dn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),dn.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Zs(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,dn.resolve()}updateTargetData(e,t){return this.Kn(t),dn.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,dn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),dn.waitFor(i).next(()=>r)}getTargetCount(e){return dn.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return dn.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),dn.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),dn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),dn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return dn.resolve(n)}containsKey(e,t){return dn.resolve(this.Br.containsKey(t))}}class ha{constructor(e,t){this.qr={},this.overlays={},this.Qr=new pn(0),this.Kr=!1,this.Kr=!0,this.$r=new sa,this.referenceDelegate=e(this),this.Ur=new da(this),this.indexManager=new Ys,this.remoteDocumentCache=function(e){return new ua(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new Gs(t),this.Gr=new ra(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ia,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new la(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){kt("MemoryPersistence","Starting transaction:",e);const r=new fa(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return dn.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class fa extends un{constructor(e){super(),this.currentSequenceNumber=e}}class pa{constructor(e){this.persistence=e,this.Jr=new aa,this.Yr=null}static Zr(e){return new pa(e)}get Xr(){if(this.Yr)return this.Yr;throw Dt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),dn.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),dn.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),dn.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dn.forEach(this.Xr,n=>{const r=tn.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,Yt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return dn.or([()=>dn.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class ma{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=ci(),r=ci();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ma(e,t.fromCache,n,r)}}class ga{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ya{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=C()?8:hn(_())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new ga;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Tt()<=V.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",Qr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),dn.resolve()):(Tt()<=V.DEBUG&&kt("QueryEngine","Query:",Qr(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Tt()<=V.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",Qr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):dn.resolve())}Yi(e,t){if(Ur(t))return dn.resolve(null);let n=Br(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Hr(t,null,"F"),n=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ci(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,Hr(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return Ur(t)||r.isEqual(Yt.min())?dn.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?dn.resolve(null):(Tt()<=V.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qr(t)),this.rs(e,s,t,rn(r,-1)).next(e=>e))})}ts(e,t){let n=new In(Xr(e));return t.forEach((t,r)=>{Wr(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Tt()<=V.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",Qr(t)),this.Ji.getDocumentsMatchingQuery(e,t,an.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class va{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Cn(Gt),this._s=new Zr(e=>Or(e),Lr),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new na(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function ba(e,t,n,r){return new va(e,t,n,r)}async function wa(e,t){const n=Ot(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=ci();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ea(e){const t=Ot(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Sa(e,t,n){let r=ci(),i=ci();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ti();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Yt.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):kt("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function xa(e,t){const n=Ot(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function _a(e,t){const n=Ot(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,dn.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new Ks(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Ca(e,t,n){const r=Ot(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!fn(e))throw e;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Ta(e,t,n){const r=Ot(e);let i=Yt.min(),s=ci();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ot(e),i=r._s.get(n);return void 0!==i?dn.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Br(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:Yt.min(),n?s:ci())).next(e=>(ka(r,Yr(t),e),{documents:e,Ts:s})))}function ka(e,t,n){let r=e.us.get(t)||Yt.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Ia{constructor(){this.activeTargetIds=hi()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Na{constructor(){this.so=new Ia,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ia,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Aa{_o(e){}shutdown(){}}class Da{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ra=null;function Oa(){return null===Ra?Ra=268435456+Math.round(2147483648*Math.random()):Ra++,"0x"+Ra.toString(16)}const La={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pa{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Ma="WebChannelConnection";class ja extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=Oa(),a=this.xo(e,t.toUriEncodedString());kt("RestConnection",`Sending RPC '${e}' ${s}:`,a,n);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,r,i),this.No(e,a,o,n).then(t=>(kt("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Nt("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",a,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_t,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=La[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=Oa();return new Promise((s,a)=>{const o=new ht;o.setWithCredentials(!0),o.listenOnce(pt.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case mt.NO_ERROR:const t=o.getResponseJson();kt(Ma,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case mt.TIMEOUT:kt(Ma,`RPC '${e}' ${i} timed out`),a(new Pt(Lt.DEADLINE_EXCEEDED,"Request time out"));break;case mt.HTTP_ERROR:const n=o.getStatus();if(kt(Ma,`RPC '${e}' ${i} failed with status:`,n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lt).indexOf(t)>=0?t:Lt.UNKNOWN}(t.status);a(new Pt(e,t.message))}else a(new Pt(Lt.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Pt(Lt.UNAVAILABLE,"Connection failed."));break;default:Dt()}}finally{kt(Ma,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);kt(Ma,`RPC '${e}' ${i} sending request:`,r),o.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=Oa(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=bt(),a=vt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const u=i.join("");kt(Ma,`Creating RPC '${e}' stream ${r}: ${u}`,o);const c=s.createWebChannel(u,o);let d=!1,h=!1;const f=new Pa({Io:t=>{h?kt(Ma,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(kt(Ma,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),kt(Ma,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},To:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,ft.EventType.OPEN,()=>{h||(kt(Ma,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),p(c,ft.EventType.CLOSE,()=>{h||(h=!0,kt(Ma,`RPC '${e}' stream ${r} transport closed`),f.So())}),p(c,ft.EventType.ERROR,t=>{h||(h=!0,Nt(Ma,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Pt(Lt.UNAVAILABLE,"The operation could not be completed")))}),p(c,ft.EventType.MESSAGE,t=>{var n;if(!h){const i=t.data[0];Rt(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){kt(Ma,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=Qi[e];if(void 0!==t)return Xi(t)}(t),i=a.message;void 0===n&&(n=Lt.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.So(new Pt(n,i)),c.close()}else kt(Ma,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),p(a,yt.STAT_EVENT,t=>{t.stat===gt.PROXY?kt(Ma,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===gt.NOPROXY&&kt(Ma,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function Fa(){return"undefined"!=typeof document?document:null}function Ua(e){return new ys(e,!0)}class Va{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&kt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class za{constructor(e,t,n,r,i,s,a,o){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Va(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===Lt.RESOURCE_EXHAUSTED?(It(t.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Lt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Pt(Lt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return kt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ba extends za{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Dt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Rt(void 0===t||"string"==typeof t),Rn.fromBase64String(t||"")):(Rt(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Rn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Lt.UNKNOWN:Xi(e.code);return new Pt(t,e.message||"")}(a);n=new us(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=ks(e,r.document.name),s=Ss(r.document.updateTime),a=r.document.createTime?Ss(r.document.createTime):Yt.min(),o=new ar({mapValue:{fields:r.document.fields}}),l=lr.newFoundDocument(i,s,a,o),u=r.targetIds||[],c=r.removedTargetIds||[];n=new os(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=ks(e,r.document),s=r.readTime?Ss(r.readTime):Yt.min(),a=lr.newNoDocument(i,s),o=r.removedTargetIds||[];n=new os([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=ks(e,r.document),s=r.removedTargetIds||[];n=new os([],s,i,null)}else{if(!("filter"in t))return Dt();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Gi(r,i),a=e.targetId;n=new ls(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Yt.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Yt.min():t.readTime?Ss(t.readTime):Yt.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=As(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pr(r)?{documents:Ls(e,r)}:{query:Ps(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ws(e,t.resumeToken);const r=vs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Yt.min())>0){n.readTime=bs(e,t.snapshotVersion.toTimestamp());const r=vs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dt()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=As(this.serializer),t.removeTarget=e,this.a_(t)}}class $a extends za{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Rt(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Ss(e.updateTime):Ss(t);return n.isEqual(Yt.min())&&(n=Ss(t)),new Ii(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ss(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=As(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Os(this.serializer,e))};this.a_(t)}}class qa extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Pt(Lt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Mo(e,_s(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pt(Lt.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Lo(e,_s(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pt(Lt.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Ha{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(It(t),this.D_=!1):kt("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Ka{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{to(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ot(e);t.L_.add(4),await Qa(t),t.q_.set("Unknown"),t.L_.delete(4),await Ga(t)}(this))})}),this.q_=new Ha(n,r)}}async function Ga(e){if(to(e))for(const t of e.B_)await t(!0)}async function Qa(e){for(const t of e.B_)await t(!1)}function Wa(e,t){const n=Ot(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),eo(n)?Za(n):Eo(n).r_()&&Xa(n,t))}function Ya(e,t){const n=Ot(e),r=Eo(n);n.N_.delete(t),r.r_()&&Ja(n,t),0===n.N_.size&&(r.r_()?r.o_():to(n)&&n.q_.set("Unknown"))}function Xa(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Eo(e).A_(t)}function Ja(e,t){e.Q_.xe(t),Eo(e).R_(t)}function Za(e){e.Q_=new ds({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Eo(e).start(),e.q_.v_()}function eo(e){return to(e)&&!Eo(e).n_()&&e.N_.size>0}function to(e){return 0===Ot(e).L_.size}function no(e){e.Q_=void 0}async function ro(e){e.q_.set("Online")}async function io(e){e.N_.forEach((t,n)=>{Xa(e,t)})}async function so(e,t){no(e),eo(e)?(e.q_.M_(t),Za(e)):e.q_.set("Unknown")}async function ao(e,t,n){if(e.q_.set("Online"),t instanceof us&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await oo(e,n)}else if(t instanceof os?e.Q_.Ke(t):t instanceof ls?e.Q_.He(t):e.Q_.We(t),!n.isEqual(Yt.min()))try{const t=await Ea(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(Rn.EMPTY_BYTE_STRING,r.snapshotVersion)),Ja(e,t);const i=new Ks(r.target,t,n,r.sequenceNumber);Xa(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){kt("RemoteStore","Failed to raise snapshot:",t),await oo(e,t)}}async function oo(e,t,n){if(!fn(t))throw t;e.L_.add(1),await Qa(e),e.q_.set("Offline"),n||(n=()=>Ea(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await Ga(e)})}function lo(e,t){return t().catch(n=>oo(e,n,t))}async function uo(e){const t=Ot(e),n=So(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;co(t);)try{const e=await xa(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,ho(t,e)}catch(e){await oo(t,e)}fo(t)&&po(t)}function co(e){return to(e)&&e.O_.length<10}function ho(e,t){e.O_.push(t);const n=So(e);n.r_()&&n.V_&&n.m_(t.mutations)}function fo(e){return to(e)&&!So(e).n_()&&e.O_.length>0}function po(e){So(e).start()}async function mo(e){So(e).p_()}async function go(e){const t=So(e);for(const n of e.O_)t.m_(n.mutations)}async function yo(e,t,n){const r=e.O_.shift(),i=Hi.from(r,t,n);await lo(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await uo(e)}async function vo(e,t){t&&So(e).V_&&await async function(e,t){if(function(e){return Yi(e)&&e!==Lt.ABORTED}(t.code)){const n=e.O_.shift();So(e).s_(),await lo(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await uo(e)}}(e,t),fo(e)&&po(e)}async function bo(e,t){const n=Ot(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=to(n);n.L_.add(3),await Qa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await Ga(n)}async function wo(e,t){const n=Ot(e);t?(n.L_.delete(2),await Ga(n)):t||(n.L_.add(2),await Qa(n),n.q_.set("Unknown"))}function Eo(e){return e.K_||(e.K_=function(e,t,n){const r=Ot(e);return r.w_(),new Ba(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:ro.bind(null,e),Ro:io.bind(null,e),mo:so.bind(null,e),d_:ao.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),eo(e)?Za(e):e.q_.set("Unknown")):(await e.K_.stop(),no(e))})),e.K_}function So(e){return e.U_||(e.U_=function(e,t,n){const r=Ot(e);return r.w_(),new $a(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mo.bind(null,e),mo:vo.bind(null,e),f_:go.bind(null,e),g_:yo.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await uo(e)):(await e.U_.stop(),e.O_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class xo{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new xo(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pt(Lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _o(e,t){if(It("AsyncQueue",`${t}: ${e}`),fn(e))return new Pt(Lt.UNAVAILABLE,`${t}: ${e}`);throw e}class Co{constructor(e){this.comparator=e?(t,n)=>e(t,n)||tn.comparator(t.key,n.key):(e,t)=>tn.comparator(e.key,t.key),this.keyedMap=ri(),this.sortedSet=new Cn(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Co;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class To{constructor(){this.W_=new Cn(tn.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Dt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class ko{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new ko(e,t,Co.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Io{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class No{constructor(){this.queries=Ao(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=Ot(e),r=n.queries;n.queries=Ao(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Pt(Lt.ABORTED,"Firestore shutting down"))}}function Ao(){return new Zr(e=>Gr(e),Kr)}async function Do(e,t){const n=Ot(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Io,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=_o(e,`Initialization of query '${Qr(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Po(n)}async function Ro(e,t){const n=Ot(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Oo(e,t){const n=Ot(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Po(n)}function Lo(e,t,n){const r=Ot(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Po(e){e.Y_.forEach(e=>{e.next()})}var Mo,jo;(jo=Mo||(Mo={})).ea="default",jo.Cache="cache";class Fo{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new ko(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mo.Cache}}class Uo{constructor(e){this.key=e}}class Vo{constructor(e){this.key=e}}class zo{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ci(),this.mutatedKeys=ci(),this.Aa=Xr(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new To,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Wr(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.ga(u,c)||(n.track({type:2,doc:c}),f=!0,(o&&this.Aa(c,o)>0||l&&this.Aa(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dt()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const a=t&&!r?this.ya():[],o=0===this.da.size&&this.current&&!r?1:0,l=o!==this.Ea;return this.Ea=o,0!==s.length||l?{snapshot:new ko(this.query,e.Ra,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new To,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ci(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Vo(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Uo(n))}),t}ba(e){this.Ta=e.Ts,this.da=ci();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ko.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Bo{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class $o{constructor(e){this.key=e,this.va=!1}}class qo{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Zr(e=>Gr(e),Kr),this.Ma=new Map,this.xa=new Set,this.Oa=new Cn(tn.comparator),this.Na=new Map,this.La=new aa,this.Ba={},this.ka=new Map,this.qa=Zs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Ho(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=hl(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Go(r,t,n,!0),i}async function Ko(e,t){const n=hl(e);await Go(n,t,!0,!1)}async function Go(e,t,n,r){const i=await _a(e.localStore,Br(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Qo(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Wa(e.remoteStore,i),o}async function Qo(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Ta(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return al(e,t.targetId,o.wa),o.snapshot}(e,t,n,r);const s=await Ta(e.localStore,t,!0),a=new zo(t,s.Ts),o=a.ma(s.documents),l=as.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);al(e,n,u.wa);const c=new Bo(t,n,a);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function Wo(e,t,n){const r=Ot(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!Kr(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ca(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ya(r.remoteStore,i.targetId),il(r,i.targetId)}).catch(cn)):(il(r,i.targetId),await Ca(r.localStore,i.targetId,!0))}async function Yo(e,t){const n=Ot(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ya(n.remoteStore,r.targetId))}async function Xo(e,t){const n=Ot(e);try{const e=await function(e,t){const n=Ot(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(Rn.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(o,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&a.push(n.Ur.updateTargetData(e,u))});let o=ti(),l=ci();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Sa(e,s,t.documentUpdates).next(e=>{o=e.Ps,l=e.Is})),!r.isEqual(Yt.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return dn.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Rt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Rt(r.va):e.removedDocuments.size>0&&(Rt(r.va),r.va=!1))}),await ul(n,e,t)}catch(e){await cn(e)}}function Jo(e,t,n){const r=Ot(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ot(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&Po(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Zo(e,t,n){const r=Ot(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Cn(tn.comparator);e=e.insert(s,lr.newNoDocument(s,Yt.min()));const n=ci().add(s),i=new ss(Yt.min(),new Map,new Cn(Gt),e,n);await Xo(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),ll(r)}else await Ca(r.localStore,t,!1).then(()=>il(r,t,n)).catch(cn)}async function el(e,t){const n=Ot(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ot(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=dn.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Rt(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ci();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);rl(n,r,null),nl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ul(n,e)}catch(e){await cn(e)}}async function tl(e,t,n){const r=Ot(e);try{const e=await function(e,t){const n=Ot(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Rt(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);rl(r,t,n),nl(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ul(r,e)}catch(n){await cn(n)}}function nl(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function rl(e,t,n){const r=Ot(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function il(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||sl(e,t)})}function sl(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(Ya(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),ll(e))}function al(e,t,n){for(const r of n)r instanceof Uo?(e.La.addReference(r.key,t),ol(e,r)):r instanceof Vo?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||sl(e,r.key)):Dt()}function ol(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.xa.add(r),ll(e))}function ll(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new tn(Jt.fromString(t)),r=e.qa.next();e.Na.set(r,new $o(n)),e.Oa=e.Oa.insert(n,r),Wa(e.remoteStore,new Ks(Br(Fr(n.path)),r,"TargetPurposeLimboResolution",pn.oe))}}async function ul(e,t,n){const r=Ot(e),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((e,o)=>{a.push(r.Ka(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ma.Wi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(e,t){const n=Ot(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>dn.forEach(t,t=>dn.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>dn.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!fn(e))throw e;kt("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function cl(e,t){const n=Ot(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const e=await wa(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Pt(Lt.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ul(n,e.hs)}}function dl(e,t){const n=Ot(e),r=n.Na.get(t);if(r&&r.va)return ci().add(r.key);{let e=ci();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function hl(e){const t=Ot(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xo.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dl.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Zo.bind(null,t),t.Ca.d_=Oo.bind(null,t.eventManager),t.Ca.$a=Lo.bind(null,t.eventManager),t}function fl(e){const t=Ot(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=el.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tl.bind(null,t),t}class pl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ua(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return ba(this.persistence,new ya,e.initialUser,this.serializer)}Ga(e){return new ha(pa.Zr,this.serializer)}Wa(e){return new Na}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pl.provider={build:()=>new pl};class ml{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Jo(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=cl.bind(null,this.syncEngine),await wo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new No}createDatastore(e){const t=Ua(e.databaseInfo.databaseId),n=function(e){return new ja(e)}(e.databaseInfo);return function(e,t,n,r){return new qa(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ka(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Jo(this.syncEngine,e,0),Da.D()?new Da:new Aa)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new qo(e,t,n,r,i,s);return a&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ot(e);kt("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await Qa(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}ml.provider={build:()=>new ml};class gl{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class yl{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=xt.UNAUTHENTICATED,this.clientId=Kt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{kt("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(kt("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=_o(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function vl(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await wa(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function bl(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wl(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>bo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bo(t.remoteStore,n)),e._onlineComponents=t}async function wl(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await vl(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Lt.FAILED_PRECONDITION||e.code===Lt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Nt("Error using user provided cache. Falling back to memory cache: "+n),await vl(e,new pl)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await vl(e,new pl);return e._offlineComponents}async function El(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await bl(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await bl(e,new ml))),e._onlineComponents}function Sl(e){return El(e).then(e=>e.syncEngine)}async function xl(e){const t=await El(e),n=t.eventManager;return n.onListen=Ho.bind(null,t.syncEngine),n.onUnlisten=Wo.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ko.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Yo.bind(null,t.syncEngine),n}function _l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new gl({next:o=>{s.Za(),t.enqueueAndForget(()=>Ro(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Pt(Lt.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Pt(Lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Fo(Fr(n.path),s,{includeMetadataChanges:!0,_a:!0});return Do(e,a)}(await xl(e),e.asyncQueue,t,n,r)),r.promise}function Cl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new gl({next:n=>{s.Za(),t.enqueueAndForget(()=>Ro(e,a)),n.fromCache&&"server"===r.source?i.reject(new Pt(Lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Fo(n,s,{includeMetadataChanges:!0,_a:!0});return Do(e,a)}(await xl(e),e.asyncQueue,t,n,r)),r.promise}function Tl(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const kl=new Map;function Il(e,t,n){if(!n)throw new Pt(Lt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Nl(e){if(!tn.isDocumentKey(e))throw new Pt(Lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Al(e){if(tn.isDocumentKey(e))throw new Pt(Lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Dl(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Dt()}function Rl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pt(Lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Dl(e);throw new Pt(Lt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Ol{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Pt(Lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pt(Lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Pt(Lt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tl(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Pt(Lt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Pt(Lt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Pt(Lt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ll{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ol({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pt(Lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pt(Lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ol(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ft;switch(e.type){case"firstParty":return new Bt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Pt(Lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kl.get(e);t&&(kt("ComponentProvider","Removing Datastore"),kl.delete(e),t.terminate())}(this),Promise.resolve()}}function Pl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Rl(e,Ll))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&Nt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=xt.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[y(JSON.stringify({alg:"none",type:"JWT"})),y(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Pt(Lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new xt(s)}e._authCredentials=new Ut(new jt(t,n))}}class Ml{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ml(this.firestore,e,this._query)}}class jl{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jl(this.firestore,e,this._key)}}class Fl extends Ml{constructor(e,t,n){super(e,t,Fr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jl(this.firestore,null,new tn(e))}withConverter(e){return new Fl(this.firestore,e,this._path)}}function Ul(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=L(e),Il("collection","path",t),e instanceof Ll){const n=Jt.fromString(t,...r);return Al(n),new Fl(e,null,n)}{if(!(e instanceof jl||e instanceof Fl))throw new Pt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jt.fromString(t,...r));return Al(n),new Fl(e.firestore,null,n)}}function Vl(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=L(e),1===arguments.length&&(t=Kt.newId()),Il("doc","path",t),e instanceof Ll){const n=Jt.fromString(t,...r);return Nl(n),new jl(e,null,new tn(n))}{if(!(e instanceof jl||e instanceof Fl))throw new Pt(Lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jt.fromString(t,...r));return Nl(n),new jl(e.firestore,e instanceof Fl?e.converter:null,new tn(n))}}class zl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Va(this,"async_queue_retry"),this.Vu=()=>{const e=Fa();e&&kt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Fa();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Fa();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Mt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fn(e))throw e;kt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw It("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=xo.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&Dt()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Bl extends Ll{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zl,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zl(e),this._firestoreClient=void 0,await e}}}function $l(e){if(e._terminated)throw new Pt(Lt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ql(e),e._firestoreClient}function ql(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Vn(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Tl(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new yl(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(Rn.fromBase64String(e))}catch(e){throw new Pt(Lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Hl(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Pt(Lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gl{constructor(e){this._methodName=e}}class Ql{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pt(Lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pt(Lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}class Wl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Yl=/^__.*__$/;class Xl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ji(e,this.data,t,this.fieldTransforms)}}function Jl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dt()}}class Zl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return du(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(Jl(this.Cu)&&Yl.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class eu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ua(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Zl({Cu:e,methodName:t,qu:n,path:en.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tu(e){const t=e._freezeSettings(),n=Ua(e._databaseId);return new eu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);ou("Data must be an object, but it was:",a,r);const o=su(r,a);let l,u;if(s.merge)l=new An(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=lu(t,r,n);if(!a.contains(i))throw new Pt(Lt.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);hu(e,i)||e.push(i)}l=new An(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new Xl(new ar(o),l,u)}function ru(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return iu(n,e.Qu(r?4:3,t))}function iu(e,t){if(au(e=L(e)))return ou("Unsupported field value:",t,e),su(e,t);if(e instanceof Gl)return function(e,t){if(!Jl(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=iu(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=L(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return mi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Wt.fromDate(e);return{timestampValue:bs(t.serializer,n)}}if(e instanceof Wt){const n=new Wt(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:bs(t.serializer,n)}}if(e instanceof Ql)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hl)return{bytesValue:ws(t.serializer,e._byteString)};if(e instanceof jl){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:xs(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Wl)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return fi(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Dl(e)}`)}(e,t)}function su(e,t){const n={};return _n(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xn(e,(e,r)=>{const i=iu(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function au(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Wt||e instanceof Ql||e instanceof Hl||e instanceof jl||e instanceof Gl||e instanceof Wl)}function ou(e,t,n){if(!au(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Dl(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function lu(e,t,n){if((t=L(t))instanceof Kl)return t._internalPath;if("string"==typeof t)return cu(e,t);throw du("Field path arguments must be of type string or ",e,!1,void 0,n)}const uu=new RegExp("[~\\*/\\[\\]]");function cu(e,t,n){if(t.search(uu)>=0)throw du(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Kl(...t.split("."))._internalPath}catch(r){throw du(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function du(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o=`Function ${t}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new Pt(Lt.INVALID_ARGUMENT,o+e+l)}function hu(e,t){return e.some(e=>e.isEqual(t))}class fu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pu extends fu{data(){return super.data()}}function mu(e,t){return"string"==typeof t?cu(e,t):t instanceof Kl?t._internalPath:t._delegate._internalPath}function gu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Pt(Lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yu{}class vu extends yu{}class bu extends vu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new bu(e,t,n)}_apply(e){const t=this._parse(e);return _u(e._query,t),new Ml(e.firestore,e.converter,qr(e._query,t))}_parse(e){const t=tu(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Pt(Lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){xu(a,s);const t=[];for(const n of a)t.push(Su(r,e,n));o={arrayValue:{values:t}}}else o=Su(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||xu(a,s),o=ru(n,t,a,"in"===s||"not-in"===s);return mr.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class wu extends yu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wu(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)_u(n,i),n=qr(n,i)}(e._query,t),new Ml(e.firestore,e.converter,qr(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Eu extends vu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Pt(Lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pt(Lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hr(t,n)}(e._query,this._field,this._direction);return new Ml(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Mr(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Su(e,t,n){if("string"==typeof(n=L(n))){if(""===n)throw new Pt(Lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vr(t)&&-1!==n.indexOf("/"))throw new Pt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Jt.fromString(n));if(!tn.isDocumentKey(r))throw new Pt(Lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xn(e,new tn(r))}if(n instanceof jl)return Xn(e,n._key);throw new Pt(Lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dl(n)}.`)}function xu(e,t){if(!Array.isArray(e)||0===e.length)throw new Pt(Lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function _u(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Pt(Lt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Pt(Lt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Cu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($n(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return xn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Pn(e.doubleValue));return new Wl(i)}convertGeoPoint(e){return new Ql(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Un(e));default:return null}}convertTimestamp(e){const t=Ln(e);return new Wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Jt.fromString(e);Rt(Hs(n));const r=new zn(n.get(1),n.get(3)),i=new tn(n.popFirst(5));return r.isEqual(t)||It(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Tu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ku{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iu extends fu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(mu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Nu extends Iu{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Au{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ku(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Nu(this._firestore,this._userDataWriter,n.key,n,new ku(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pt(Lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Nu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ku(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Nu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ku(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Du(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Du(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dt()}}function Ru(e){e=Rl(e,jl);const t=Rl(e.firestore,Bl);return _l($l(t),e._key).then(n=>Pu(t,e,n))}class Ou extends Cu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jl(this.firestore,null,t)}}function Lu(e,t){return function(e,t){const n=new Mt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=fl(e);try{const e=await function(e,t){const n=Ot(e),r=Wt.now(),i=t.reduce((e,t)=>e.add(t.key),ci());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=ti(),l=ci();return n.cs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Pi(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Fi(e.key,t,or(t.value.mapValue),Ni.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:ii(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Cn(Gt)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await ul(r,e.changes),await uo(r.remoteStore)}catch(e){const t=_o(e,"Failed to persist write");n.reject(t)}}(await Sl(e),t,n)),n.promise}($l(e),t)}function Pu(e,t,n){const r=n.docs.get(t._key),i=new Ou(e);return new Iu(e,i,t._key,r,new ku(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_t=e}("10.14.1"),He(new P("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Bl(new Vt(e.getProvider("auth-internal")),new qt(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pt(Lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zn(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Xe(St,"4.7.3",e),Xe(St,"4.7.3","esm2017")}();Xe("firebase","10.14.1","app");const Mu="@firebase/installations",ju="0.6.9",Fu=1e4,Uu=`w:${ju}`,Vu="FIS_v2",zu=36e5,Bu=new N("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $u(e){return e instanceof I&&e.code.includes("request-failed")}function qu(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Hu(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Ku(e,t){const n=(await t.json()).error;return Bu.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Gu(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Qu(e,t){let{refreshToken:n}=t;const r=Gu(e);return r.append("Authorization",function(e){return`${Vu} ${e}`}(n)),r}async function Wu(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Yu(e){return new Promise(t=>{setTimeout(t,e)})}const Xu=/^[cdef][\w-]{21}$/;function Ju(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Xu.test(t)?t:""}catch(e){return""}}function Zu(e){return`${e.appName}!${e.appId}`}const ec=new Map;function tc(e,t){const n=Zu(e);nc(n,t),function(e,t){const n=ic();n&&n.postMessage({key:e,fid:t});sc()}(n,t)}function nc(e,t){const n=ec.get(e);if(n)for(const r of n)r(t)}let rc=null;function ic(){return!rc&&"BroadcastChannel"in self&&(rc=new BroadcastChannel("[Firebase] FID Change"),rc.onmessage=e=>{nc(e.data.key,e.data.fid)}),rc}function sc(){0===ec.size&&rc&&(rc.close(),rc=null)}const ac="firebase-installations-store";let oc=null;function lc(){return oc||(oc=ie("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(ac)}})),oc}async function uc(e,t){const n=Zu(e),r=(await lc()).transaction(ac,"readwrite"),i=r.objectStore(ac),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||tc(e,t.fid),t}async function cc(e){const t=Zu(e),n=(await lc()).transaction(ac,"readwrite");await n.objectStore(ac).delete(t),await n.done}async function dc(e,t){const n=Zu(e),r=(await lc()).transaction(ac,"readwrite"),i=r.objectStore(ac),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||tc(e,a.fid),a}async function hc(e){let t;const n=await dc(e.appConfig,n=>{const r=function(e){const t=e||{fid:Ju(),registrationStatus:0};return mc(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Bu.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=qu(n),a=Gu(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:Vu,appId:n.appId,sdkVersion:Uu},u={method:"POST",headers:a,body:JSON.stringify(l)},c=await Wu(()=>fetch(s,u));if(c.ok){const e=await c.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Hu(e.authToken)}}throw await Ku("Create Installation",c)}(e,t);return uc(e.appConfig,n)}catch(n){throw $u(n)&&409===n.customData.serverCode?await cc(e.appConfig):await uc(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:fc(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function fc(e){let t=await pc(e.appConfig);for(;1===t.registrationStatus;)await Yu(100),t=await pc(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await hc(e);return n||t}return t}function pc(e){return dc(e,e=>{if(!e)throw Bu.create("installation-not-found");return mc(e)})}function mc(e){return 1===(t=e).registrationStatus&&t.registrationTime+Fu<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function gc(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${qu(e)}/${n}/authTokens:generate`}(n,t),s=Qu(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:Uu,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},u=await Wu(()=>fetch(i,l));if(u.ok){return Hu(await u.json())}throw await Ku("Generate Auth Token",u)}async function yc(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await dc(e.appConfig,r=>{if(!bc(r))throw Bu.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+zu}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await vc(e.appConfig);for(;1===n.authToken.requestStatus;)await Yu(100),n=await vc(e.appConfig);const r=n.authToken;return 0===r.requestStatus?yc(e,t):r}(e,n),r;{if(!navigator.onLine)throw Bu.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await gc(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await uc(e.appConfig,r),n}catch(n){if(!$u(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await uc(e.appConfig,n)}else await cc(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function vc(e){return dc(e,e=>{if(!bc(e))throw Bu.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Fu<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function bc(e){return void 0!==e&&2===e.registrationStatus}async function wc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await hc(e);t&&await t}(n);return(await yc(n,t)).token}function Ec(e){return Bu.create("missing-app-config-values",{valueName:e})}const Sc="installations",xc=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ec("App Configuration");if(!e.name)throw Ec("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ec(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ke(t,"heartbeat"),_delete:()=>Promise.resolve()}},_c=e=>{const t=Ke(e.getProvider("app").getImmediate(),Sc).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await hc(t);return r?r.catch(console.error):yc(t).catch(console.error),n.fid}(t),getToken:e=>wc(t,e)}};He(new P(Sc,xc,"PUBLIC")),He(new P("installations-internal",_c,"PRIVATE")),Xe(Mu,ju),Xe(Mu,ju,"esm2017");const Cc="analytics",Tc="https://www.googletagmanager.com/gtag/js",kc=new H("@firebase/analytics"),Ic=new N("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Nc(e){if(!e.startsWith(Tc)){const t=Ic.create("invalid-gtag-resource",{gtagURL:e});return kc.warn(t.message),""}return e}function Ac(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Dc(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Nc}),r=document.createElement("script"),i=`${Tc}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Rc(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Ac(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){kc.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await Ac(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(o){kc.error(o)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=a;e("consent",t,n)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(l){kc.error(l)}}}const Oc=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Lc(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Pc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Oc,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Ic.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Ic.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new jc;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Mc({appId:r,apiKey:i,measurementId:s},a,o,t)}async function Mc(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oc;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Ic.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(u){if(l)return kc.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===u||void 0===u?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Lc(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw Ic.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(u){const t=u;if(!function(e){if(!(e instanceof I)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(o),l)return kc.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:o,measurementId:l};throw u}const r=503===Number(null===(a=null===t||void 0===t?void 0:t.customData)||void 0===a?void 0:a.httpStatus)?O(i,s.intervalMillis,30):O(i,s.intervalMillis),c={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(o,c),kc.debug(`Calling attemptFetch again in ${r} millis`),Mc(e,c,n,s)}}class jc{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Fc,Uc;function Vc(e){Uc=e}function zc(e){Fc=e}async function Bc(e,t,n,r,i,s,a){var o;const l=Pc(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&kc.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>kc.error(e)),t.push(l);const u=async function(){if(!T())return kc.warn(Ic.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await k()}catch(e){return kc.warn(Ic.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[c,d]=await Promise.all([l,u]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Tc)&&n.src.includes(e))return n;return null})(s)||Dc(s,c.measurementId),Uc&&(i("consent","default",Uc),Vc(void 0)),i("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",c.measurementId,h),Fc&&(i("set",Fc),zc(void 0)),c.measurementId}class $c{constructor(e){this.app=e}_delete(){return delete qc[this.app.options.appId],Promise.resolve()}}let qc={},Hc=[];const Kc={};let Gc,Qc,Wc="dataLayer",Yc="gtag",Xc=!1;function Jc(){const e=[];if(function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Ic.create("invalid-analytics-context",{errorInfo:t});kc.warn(n.message)}}function Zc(e,t,n){Jc();const r=e.options.appId;if(!r)throw Ic.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Ic.create("no-api-key");kc.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=qc[r])throw Ic.create("already-exists",{id:r});if(!Xc){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Wc);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Rc(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(qc,Hc,Kc,Wc,Yc);Qc=e,Gc=t,Xc=!0}qc[r]=Bc(e,Hc,Kc,t,Gc,Wc,n);return new $c(e)}function ed(e,t,n,r){e=L(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Qc,qc[e.app.options.appId],t,n,r).catch(e=>kc.error(e))}const td="@firebase/analytics",nd="0.10.8";He(new P(Cc,(e,t)=>{let{options:n}=t;return Zc(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),He(new P("analytics-internal",function(e){try{const t=e.getProvider(Cc).getImmediate();return{logEvent:(e,n,r)=>ed(t,e,n,r)}}catch(t){throw Ic.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Xe(td,nd),Xe(td,nd,"esm2017");const rd=We({apiKey:"AIzaSyAV1S-QlVLRFSmAaS9_etQ7_oOmaLc8rp0",authDomain:"mictlansonoro.firebaseapp.com",projectId:"mictlansonoro",storageBucket:"mictlansonoro.firebasestorage.app",messagingSenderId:"935344728932",appId:"1:935344728932:web:8d7071edbc98b401ab6871",measurementId:"G-MDMLFHJQBB"}),id=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Ke("object"==typeof e?e:Ye(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=E("firestore");e&&Pl(r,...e)}return r}(rd),sd=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();e=L(e);const t=Ke(e,Cc);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ke(e,Cc);if(n.isInitialized()){const e=n.getImmediate();if(D(t,n.getOptions()))return e;throw Ic.create("already-initialized")}const r=n.initialize({options:t})}(e)}(rd),"stories"),ad=async e=>{console.log("\ud83d\udd0d INICIANDO GUARDADO:",e);try{var t,n,r,i,s;if(!e.story||!e.formData)throw new Error("Datos incompletos: se requiere story y formData");const a={title:e.title||`Cuento ${(new Date).toLocaleDateString("es-ES")}`,story:e.story,culture:(null===(t=e.formData)||void 0===t?void 0:t.cultura)||"Sin cultura especificada",storyType:(null===(n=e.formData)||void 0===n?void 0:n.tipoHistoria)||"Cuento tradicional",characterName:(null===(r=e.formData)||void 0===r?void 0:r.nombrePersonaje)||"Protagonista",setting:(null===(i=e.formData)||void 0===i?void 0:i.ambientacion)||"Lugar m\xedstico",moralLesson:(null===(s=e.formData)||void 0===s?void 0:s.ensenanza)||"Sabidur\xeda ancestral",createdAt:Wt.now(),wordCount:e.story.split(" ").length,formData:e.formData,version:"1.0",language:"es",isInteractive:e.story.includes("\xbfQu\xe9 decide")||e.story.includes("[DECISI\xd3N:")};console.log("\ud83d\udd0d DATOS PREPARADOS:",a);const o=await function(e,t){const n=Rl(e.firestore,Bl),r=Vl(e),i=Tu(e.converter,t);return Lu(n,[nu(tu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ni.exists(!1))]).then(()=>r)}(Ul(id,sd),a);console.log("\u2705 CUENTO GUARDADO CON ID:",o.id);return(await Ru(o)).exists()?console.log("\u2705 VERIFICACI\xd3N EXITOSA: Cuento existe en Firebase"):console.error("\u274c ERROR: No se pudo verificar el guardado"),o.id}catch(a){throw console.error("\u274c ERROR AL GUARDAR CUENTO:",a),console.error("\u274c Error code:",a.code),console.error("\u274c Error message:",a.message),new Error(`Error al guardar en Firebase: ${a.message}`)}},od=async()=>{console.log("\ud83d\udd0d CARGANDO CUENTOS DESDE FIREBASE...");try{const e=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof yu&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof wu).length,n=e.filter(e=>e instanceof bu).length;if(t>1||t>0&&n>0)throw new Pt(Lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}(Ul(id,sd),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mu("orderBy",e);return Eu._create(n,t)}("createdAt","desc")),t=await function(e){e=Rl(e,Ml);const t=Rl(e.firestore,Bl),n=$l(t),r=new Ou(t);return gu(e._query),Cl(n,e._query).then(n=>new Au(t,r,e,n))}(e);console.log(`\ud83d\udd0d ENCONTRADOS ${t.size} documentos`);const n=[];return t.forEach(e=>{var t;const r=e.data();console.log(`\ud83d\udd0d Procesando documento ${e.id}:`,r),n.push({id:e.id,title:r.title,story:r.story,culture:r.culture,storyType:r.storyType,characterName:r.characterName,setting:r.setting,moralLesson:r.moralLesson,wordCount:r.wordCount,isInteractive:r.isInteractive,formData:r.formData,createdAt:(null===(t=r.createdAt)||void 0===t?void 0:t.toDate())||new Date,version:r.version||"1.0",language:r.language||"es"})}),console.log(`\u2705 CUENTOS CARGADOS EXITOSAMENTE: ${n.length}`),n}catch(e){throw console.error("\u274c ERROR AL CARGAR CUENTOS:",e),new Error(`Error al cargar cuentos: ${e.message}`)}},ld=async e=>{console.log("\ud83d\udd0d ELIMINANDO CUENTO:",e);try{if(!e)throw new Error("ID de cuento requerido");const n=Vl(id,sd,e);if(!(await Ru(n)).exists())throw new Error("El cuento no existe");await(t=n,Lu(Rl(t.firestore,Bl),[new Bi(t._key,Ni.none())])),console.log("\u2705 CUENTO ELIMINADO EXITOSAMENTE")}catch(n){throw console.error("\u274c ERROR AL ELIMINAR CUENTO:",n),new Error(`Error al eliminar cuento: ${n.message}`)}var t},ud=e=>{let{onSelectStory:t,onBackToForm:n}=e;const[i,s]=(0,r.useState)([]),[o,l]=(0,r.useState)(null),[u,c]=(0,r.useState)(!0),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{m(),g()},[]);const m=async()=>{try{c(!0);const e=await od();s(e)}catch(e){h(e.message)}finally{c(!1)}},g=async()=>{try{const e=await(async()=>{console.log("\ud83d\udd0d CALCULANDO ESTAD\xcdSTICAS...");try{const e=await od();if(0===e.length)return{total:0,averageWords:0,cultures:{},storyTypes:{},totalWords:0};const t={total:e.length,totalWords:e.reduce((e,t)=>e+(t.wordCount||0),0),cultures:{},storyTypes:{}};return e.forEach(e=>{const n=e.culture||"Sin especificar";t.cultures[n]=(t.cultures[n]||0)+1}),e.forEach(e=>{const n=e.storyType||"Sin especificar";t.storyTypes[n]=(t.storyTypes[n]||0)+1}),t.averageWords=Math.round(t.totalWords/t.total),console.log("\u2705 ESTAD\xcdSTICAS CALCULADAS:",t),t}catch(d){throw console.error("\u274c ERROR AL CALCULAR ESTAD\xcdSTICAS:",d),new Error(`Error al calcular estad\xedsticas: ${d.message}`)}})();l(e)}catch(e){console.error("Error loading stats:",e)}};return u?(0,a.jsx)("div",{className:"carga-cuentos-guardados",children:(0,a.jsxs)("div",{className:"carga-container-completo",children:[(0,a.jsx)("div",{className:"carga-spinner-container",children:(0,a.jsx)("div",{className:"carga-spinner-principal"})}),(0,a.jsx)("h3",{className:"carga-titulo",children:"Cargando Cuentos Guardados"}),(0,a.jsx)("p",{className:"carga-mensaje",children:"Consultando la biblioteca ancestral..."}),(0,a.jsxs)("div",{className:"carga-puntos",children:[(0,a.jsx)("div",{className:"carga-punto"}),(0,a.jsx)("div",{className:"carga-punto"}),(0,a.jsx)("div",{className:"carga-punto"})]}),(0,a.jsx)("p",{className:"carga-descripcion",children:"Recuperando tus historias de la tradici\xf3n oral digital"})]})}):(0,a.jsxs)("div",{className:"biblioteca-cuentos-wrapper",children:[(0,a.jsxs)("div",{className:"biblioteca-header-section",children:[(0,a.jsxs)("div",{className:"biblioteca-top-controls",children:[(0,a.jsx)("button",{onClick:n,className:"back-to-form-btn",children:"\u2190 Volver al Formulario"}),(0,a.jsx)("h2",{className:"biblioteca-main-title",children:"Cuentos Guardados"})]}),o&&(0,a.jsxs)("div",{className:"biblioteca-stats-container",children:[(0,a.jsxs)("div",{className:"biblioteca-stat-box",children:[(0,a.jsx)("span",{className:"biblioteca-stat-value",children:o.total}),(0,a.jsx)("span",{className:"biblioteca-stat-name",children:"Cuentos totales"})]}),(0,a.jsxs)("div",{className:"biblioteca-stat-box",children:[(0,a.jsx)("span",{className:"biblioteca-stat-value",children:o.averageWords}),(0,a.jsx)("span",{className:"biblioteca-stat-name",children:"Palabras promedio"})]}),(0,a.jsxs)("div",{className:"biblioteca-stat-box",children:[(0,a.jsx)("span",{className:"biblioteca-stat-value",children:Object.keys(o.cultures).length}),(0,a.jsx)("span",{className:"biblioteca-stat-name",children:"Culturas diferentes"})]})]})]}),d&&(0,a.jsxs)("div",{className:"error-message",children:[(0,a.jsxs)("p",{children:["Error: ",d]}),(0,a.jsx)("button",{onClick:m,children:"Reintentar"})]}),0===i.length?(0,a.jsxs)("div",{className:"biblioteca-estado-vacio",children:[(0,a.jsx)("div",{className:"biblioteca-icono-vacio",children:"\ud83d\udcd6"}),(0,a.jsx)("h3",{children:"No hay cuentos guardados"}),(0,a.jsx)("p",{children:"Crea tu primer cuento cultural y gu\xe1rdalo para verlo aqu\xed."}),(0,a.jsx)("button",{onClick:n,className:"cultural-btn",children:"Crear Primer Cuento"})]}):(0,a.jsx)("div",{className:"biblioteca-cuentos-grid",children:i.map(e=>{return(0,a.jsxs)("div",{className:"biblioteca-cuento-tarjeta",children:[(0,a.jsxs)("div",{className:"biblioteca-cuento-titulo",children:[(0,a.jsx)("h3",{children:e.title}),(0,a.jsxs)("div",{className:"biblioteca-cuento-info",children:[(0,a.jsx)("span",{className:"biblioteca-etiqueta-cultura",children:e.culture}),(0,a.jsx)("span",{className:"biblioteca-fecha-creacion",children:(n=e.createdAt,n?n.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Fecha no disponible")})]})]}),(0,a.jsx)("div",{className:"biblioteca-resumen-cuento",children:(0,a.jsxs)("p",{children:[e.story.substring(0,150),"..."]})}),(0,a.jsxs)("div",{className:"biblioteca-datos-extra",children:[(0,a.jsxs)("span",{className:"biblioteca-palabras-total",children:[e.wordCount," palabras"]}),(0,a.jsx)("span",{className:"biblioteca-tipo-historia",children:e.storyType})]}),(0,a.jsxs)("div",{className:"biblioteca-botones-accion",children:[(0,a.jsx)("button",{onClick:()=>t(e),className:"biblioteca-btn-leer",children:"\ud83d\udcd6 Leer"}),(0,a.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de que quieres eliminar este cuento?"))try{p(e),await ld(e),await m(),await g()}catch(t){h(t.message)}finally{p(null)}})(e.id),className:"biblioteca-btn-eliminar",disabled:f===e.id,children:[f===e.id?"\u23f3":"\ud83d\uddd1\ufe0f"," Eliminar"]})]}),f===e.id&&(0,a.jsx)("div",{className:"biblioteca-overlay-carga",children:(0,a.jsx)("div",{className:"biblioteca-mini-spinner"})})]},e.id);var n})})]})},cd=e=>{let{onEnterApp:t}=e;const[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=setTimeout(()=>{i(!0)},100),t=setTimeout(()=>{o(!0)},500);return()=>{clearTimeout(e),clearTimeout(t)}},[]);const l=[{id:1,src:"/Mictl-n-Sonoro/images/aztec-calendar.jpg",alt:"Calendario Azteca",fallback:"\ud83c\udf05"},{id:2,src:"/Mictl-n-Sonoro/images/maya-pyramid.jpg",alt:"Pir\xe1mide Maya",fallback:"\ud83c\udfdb\ufe0f"},{id:3,src:"/Mictl-n-Sonoro/images/quetzal.jpg",alt:"Quetzal",fallback:"\ud83e\udd85"},{id:4,src:"/Mictl-n-Sonoro/images/obsidian-blade.jpg",alt:"Navaja de Obsidiana",fallback:"\u2694\ufe0f"},{id:5,src:"/Mictl-n-Sonoro/images/feathered-serpent.jpg",alt:"Serpiente Emplumada",fallback:"\ud83d\udc0d"},{id:6,src:"/Mictl-n-Sonoro/images/jade-mask.jpg",alt:"M\xe1scara de Jade",fallback:"\ud83d\udc8e"},{id:7,src:"/Mictl-n-Sonoro/images/cacao-pod.jpg",alt:"Vaina de Cacao",fallback:"\ud83c\udf6b"},{id:8,src:"/Mictl-n-Sonoro/images/aztec-warrior.jpg",alt:"Guerrero Azteca",fallback:"\u26a1"}];return(0,a.jsxs)("div",{className:"welcome-container "+(n?"visible":""),children:[(0,a.jsxs)("div",{className:"welcome-background",children:[(0,a.jsx)("div",{className:"bg-gradient-1"}),(0,a.jsx)("div",{className:"bg-gradient-2"}),(0,a.jsx)("div",{className:"bg-particles"})]}),(0,a.jsxs)("div",{className:"welcome-content",children:[(0,a.jsxs)("div",{className:"welcome-text-section",children:[(0,a.jsx)("div",{className:"welcome-category",children:(0,a.jsx)("span",{className:"category-badge",children:"INTELIGENCIA ANCESTRAL"})}),(0,a.jsxs)("h1",{className:"welcome-title",children:[(0,a.jsx)("span",{className:"title-highlight",children:"Mictl\xe1n Sonoro"}),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"title-subtitle",children:"Cuentos que cobran vida"})]}),(0,a.jsx)("p",{className:"welcome-description",children:"Descubre el poder de la narrativa ancestral fusionada con inteligencia artificial. Crea historias interactivas \xfanicas basadas en las ricas tradiciones culturales de M\xe9xico. Explora mitos, leyendas y sabidur\xeda milenaria reimaginada para el presente."}),(0,a.jsxs)("div",{className:"welcome-features",children:[(0,a.jsxs)("div",{className:"feature-item",children:[(0,a.jsxs)("div",{className:"feature-icon",children:[(0,a.jsx)("img",{src:"/Mictl-n-Sonoro/images/img.jpg",alt:"Culturas Prehisp\xe1nicas",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,a.jsx)("span",{className:"feature-icon-fallback",children:"\ud83c\udfdb\ufe0f"})]}),(0,a.jsx)("span",{children:"Culturas Prehisp\xe1nicas"})]}),(0,a.jsxs)("div",{className:"feature-item",children:[(0,a.jsxs)("div",{className:"feature-icon",children:[(0,a.jsx)("img",{src:"/Mictl-n-Sonoro/images/img.jpg",alt:"Historias Interactivas",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,a.jsx)("span",{className:"feature-icon-fallback",children:"\ud83d\udcda"})]}),(0,a.jsx)("span",{children:"Historias Interactivas"})]}),(0,a.jsxs)("div",{className:"feature-item",children:[(0,a.jsxs)("div",{className:"feature-icon",children:[(0,a.jsx)("img",{src:"/Mictl-n-Sonoro/images/img.jpg",alt:"Narrativa Inmersiva",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}),(0,a.jsx)("span",{className:"feature-icon-fallback",children:"\ud83c\udfad"})]}),(0,a.jsx)("span",{children:"Narrativa Inmersiva"})]})]}),(0,a.jsxs)("button",{className:"welcome-cta-button",onClick:()=>{i(!1),setTimeout(()=>{t()},800)},children:[(0,a.jsx)("span",{className:"button-text",children:"Comenzar mi Aventura"}),(0,a.jsx)("span",{className:"button-arrow",children:"\u2192"})]}),(0,a.jsxs)("div",{className:"welcome-author",children:[(0,a.jsx)("div",{className:"author-avatar",children:(0,a.jsx)("span",{children:"\ud83c\udffa"})}),(0,a.jsxs)("div",{className:"author-info",children:[(0,a.jsx)("div",{className:"author-name",children:"Mocti - Guardi\xe1n Digital"}),(0,a.jsx)("div",{className:"author-title",children:"Experto en Tradiciones Ancestrales"})]})]})]}),(0,a.jsx)("div",{className:"welcome-images-section",children:(0,a.jsx)("div",{className:"floating-images-container "+(s?"loaded":""),children:l.map((e,t)=>(0,a.jsx)("div",{className:`floating-image floating-image-${t+1}`,style:{animationDelay:.2*t+"s"},children:(0,a.jsxs)("div",{className:"image-card",children:[(0,a.jsxs)("div",{className:"image-content",children:[(0,a.jsx)("span",{className:"image-fallback",children:e.fallback}),(0,a.jsx)("img",{src:e.src,alt:e.alt,onError:t=>{console.log(`Error cargando imagen: ${e.src}`),t.target.style.display="none"},onLoad:t=>{console.log(`Imagen cargada exitosamente: ${e.src}`),t.target.previousSibling.style.display="none"}})]}),(0,a.jsx)("div",{className:"image-glow"})]})},e.id))})})]}),(0,a.jsx)("div",{className:"welcome-particles",children:[...Array(12)].map((e,t)=>(0,a.jsx)("div",{className:`particle particle-${t+1}`},t))})]})};const dd=function(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)("welcome"),[v,b]=(0,r.useState)(!1),[w,E]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=document.querySelector(".app-header"),t=()=>{window.scrollY>100?null===e||void 0===e||e.classList.add("scrolled"):null===e||void 0===e||e.classList.remove("scrolled")};return window.addEventListener("scroll",t),"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission(),()=>{window.removeEventListener("scroll",t)}},[]);const S=()=>{y("form"),t(""),m(""),E(""),b(!1)},x=()=>{y("saved"),E(""),b(!1)};return(0,a.jsxs)("div",{className:"App mictlan-app",children:["welcome"===g&&(0,a.jsx)(cd,{onEnterApp:()=>{y("form")}}),"welcome"!==g&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"app-header cultural-header",children:(0,a.jsxs)("div",{className:"header-content",children:[(0,a.jsx)("h1",{children:"Mictl\xe1n Sonoro"}),(0,a.jsx)("p",{children:"Cuentos interactivos de la cultura mexicana"})]})}),(0,a.jsxs)("main",{className:"app-main",children:["form"===g&&(0,a.jsx)("div",{className:"app-container-single",children:(0,a.jsxs)("div",{className:"form-section",children:[(0,a.jsx)(l,{onSubmit:async e=>{o(!0),m(""),t(""),i(e),b(!1),E("");try{const n=await(0,u.generateCulturalStory)(e);t(n),y("story")}catch(n){m("Error al generar el cuento cultural: "+n.message),console.error("Error:",n)}finally{o(!1)}},isLoading:s,onViewSavedStories:x}),s&&(0,a.jsx)("div",{className:"loading-overlay",children:(0,a.jsx)(h,{message:"Consultando los c\xf3dices ancestrales..."})}),p&&(0,a.jsxs)("div",{className:"error-message cultural-error",children:[(0,a.jsx)("h3",{children:"Error en la generaci\xf3n"}),(0,a.jsx)("p",{children:p}),(0,a.jsx)("small",{children:"Verifica tu conexi\xf3n a internet y tu API key de Gemini."})]})]})}),"story"===g&&e&&(0,a.jsx)("div",{className:"app-container-single",children:(0,a.jsxs)("div",{className:"story-section",children:[(0,a.jsxs)("div",{className:"story-header-actions",children:[(0,a.jsxs)("div",{className:"story-buttons-container",children:[(0,a.jsx)("button",{onClick:S,className:"story-back-btn",children:"\u2190 Crear Nuevo Cuento"}),(0,a.jsx)("button",{onClick:async()=>{if(!e||!n)return void alert("No hay cuento para guardar");if(v)return;const t=prompt("T\xedtulo del cuento (opcional):",`Cuento ${n.cultura} - ${(new Date).toLocaleDateString()}`);if(null!==t){b(!0),E("");try{const r={story:e,formData:n,title:t||void 0},i=await ad(r);E("\u2705 \xa1Cuento guardado exitosamente!"),"Notification"in window&&"granted"===Notification.permission&&new Notification("Mictl\xe1n Sonoro",{body:"\xa1Tu cuento se guard\xf3 en la biblioteca ancestral!",icon:"/favicon.ico"}),setTimeout(()=>E(""),4e3),console.log("Cuento guardado con ID:",i)}catch(r){console.error("Error al guardar:",r),E("\u274c Error al guardar el cuento. Int\xe9ntalo de nuevo."),setTimeout(()=>E(""),5e3)}finally{b(!1)}}},className:"story-save-btn",disabled:v,children:v?"\u23f3 Guardando...":"\ud83d\udcbe Guardar Cuento"}),(0,a.jsx)("button",{onClick:x,className:"story-view-saved-btn",children:"\ud83d\udcda Ver Guardados"})]}),w&&(0,a.jsx)("div",{className:`\n                        ${w.includes("\u2705")?"save-notification-success":"save-notification-error"}\n                      `,style:{textAlign:"center",marginTop:"1rem"},children:w})]}),(_=e,(_.includes("\xbfQu\xe9 decide")||_.includes("\xbfQu\xe9 hace")||_.includes("\xbfCu\xe1l es")||_.includes("[DECISI\xd3N:")||_.includes("Opci\xf3n A:"))&&!_.includes("(Supongamos que se elige")?(0,a.jsx)(d,{story:e,originalFormData:n}):(0,a.jsx)(c,{story:e,originalFormData:n}))]})}),"saved"===g&&(0,a.jsx)(ud,{onSelectStory:e=>{t(e.story),i(e.formData),y("story"),b(!1),E("")},onBackToForm:S})]}),(0,a.jsxs)("footer",{className:"app-footer",children:[(0,a.jsx)("p",{children:"Mictl\xe1n Sonoro - Preservando la cultura mexicana a trav\xe9s de la tecnolog\xeda"}),(0,a.jsx)("small",{children:"Desarrollado con respeto y admiraci\xf3n por nuestras ra\xedces ancestrales"})]}),(0,a.jsx)(f,{onSuggestion:e=>{console.log("Sugerencia de Mocti:",e)}})]})]});var _};i.createRoot(document.getElementById("root")).render((0,a.jsx)(r.StrictMode,{children:(0,a.jsx)(dd,{})}))})();
//# sourceMappingURL=main.3e52c36b.js.map